{"ast":null,"code":"import _asyncToGenerator from\"/Users/C96363A/Automation/testing-component-with-cypress-storybook/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/C96363A/Automation/testing-component-with-cypress-storybook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/C96363A/Automation/testing-component-with-cypress-storybook/node_modules/@babel/runtime/regenerator/index.js\";import{useState}from'react';import LoginForm from'./components/LoginForm';import Welcome from'./components/Welcome';import{jsx as _jsx}from\"react/jsx-runtime\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isAuthed=_useState2[0],setIsAuthed=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],setErrorMessage=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),username=_useState6[0],setUsername=_useState6[1];var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(creds){var res,_yield$res$json,message;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setErrorMessage('');_context.next=4;return fetch('/auth',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(creds)});case 4:res=_context.sent;if(!(res.status===200)){_context.next=10;break;}setIsAuthed(true);setUsername(creds.username);_context.next=19;break;case 10:if(!(res.status===401)){_context.next=18;break;}_context.next=13;return res.json();case 13:_yield$res$json=_context.sent;message=_yield$res$json.message;setErrorMessage(message);_context.next=19;break;case 18:throw Error(\"error during auth, status code: \".concat(res.status));case 19:_context.next=24;break;case 21:_context.prev=21;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 24:case\"end\":return _context.stop();}}},_callee,null,[[0,21]]);}));return function handleLogin(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"lg:container lg mx-auto m-10\",children:isAuthed?/*#__PURE__*/_jsx(Welcome,{username:username,onLogout:function onLogout(){setIsAuthed(false);setUsername('');}}):/*#__PURE__*/_jsx(LoginForm,{onLogin:handleLogin,errorMessage:errorMessage})});}export default App;","map":{"version":3,"sources":["/Users/C96363A/Automation/testing-component-with-cypress-storybook/src/App.tsx"],"names":["useState","LoginForm","Welcome","App","isAuthed","setIsAuthed","errorMessage","setErrorMessage","username","setUsername","handleLogin","creds","fetch","method","headers","body","JSON","stringify","res","status","json","message","Error","console","error"],"mappings":"2cAAA,OAASA,QAAT,KAAyB,OAAzB,CACA,MAAOC,CAAAA,SAAP,KAAsB,wBAAtB,CACA,MAAOC,CAAAA,OAAP,KAAoB,sBAApB,C,2CAEA,QAASC,CAAAA,GAAT,EAAe,CACb,cAAgCH,QAAQ,CAAC,KAAD,CAAxC,wCAAOI,QAAP,eAAiBC,WAAjB,eACA,eAAwCL,QAAQ,CAAC,EAAD,CAAhD,yCAAOM,YAAP,eAAqBC,eAArB,eACA,eAAgCP,QAAQ,CAAC,EAAD,CAAxC,yCAAOQ,QAAP,eAAiBC,WAAjB,eAEA,GAAMC,CAAAA,WAAW,0FAAG,iBAAOC,KAAP,kKAEhBJ,eAAe,CAAC,EAAD,CAAf,CAFgB,sBAGEK,CAAAA,KAAK,CAAC,OAAD,CAAU,CAC/BC,MAAM,CAAE,MADuB,CAE/BC,OAAO,CAAE,CAAE,eAAgB,kBAAlB,CAFsB,CAG/BC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeN,KAAf,CAHyB,CAAV,CAHP,QAGVO,GAHU,oBAQZA,GAAG,CAACC,MAAJ,GAAe,GARH,2BASdd,WAAW,CAAC,IAAD,CAAX,CACAI,WAAW,CAACE,KAAK,CAACH,QAAP,CAAX,CAVc,oCAYVU,GAAG,CAACC,MAAJ,GAAe,GAZL,kDAacD,CAAAA,GAAG,CAACE,IAAJ,EAbd,uCAaJC,OAbI,iBAaJA,OAbI,CAcZd,eAAe,CAACc,OAAD,CAAf,CAdY,oCAgBNC,CAAAA,KAAK,2CAAoCJ,GAAG,CAACC,MAAxC,EAhBC,0FAoBhBI,OAAO,CAACC,KAAR,cApBgB,qEAAH,kBAAXd,CAAAA,WAAW,4CAAjB,CAwBA,mBACE,YAAK,SAAS,CAAC,8BAAf,UACGN,QAAQ,cACP,KAAC,OAAD,EACE,QAAQ,CAAEI,QADZ,CAEE,QAAQ,CAAE,mBAAM,CACdH,WAAW,CAAC,KAAD,CAAX,CACAI,WAAW,CAAC,EAAD,CAAX,CACD,CALH,EADO,cASP,KAAC,SAAD,EAAW,OAAO,CAAEC,WAApB,CAAiC,YAAY,CAAEJ,YAA/C,EAVJ,EADF,CAeD,CAED,cAAeH,CAAAA,GAAf","sourcesContent":["import { useState } from 'react';\nimport LoginForm from './components/LoginForm';\nimport Welcome from './components/Welcome';\n\nfunction App() {\n  const [isAuthed, setIsAuthed] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [username, setUsername] = useState('');\n\n  const handleLogin = async (creds: { username: string; password: string }) => {\n    try {\n      setErrorMessage('');\n      const res = await fetch('/auth', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(creds),\n      });\n      if (res.status === 200) {\n        setIsAuthed(true);\n        setUsername(creds.username);\n      } else {\n        if (res.status === 401) {\n          const { message } = await res.json();\n          setErrorMessage(message);\n        } else {\n          throw Error(`error during auth, status code: ${res.status}`);\n        }\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  return (\n    <div className=\"lg:container lg mx-auto m-10\">\n      {isAuthed ? (\n        <Welcome\n          username={username}\n          onLogout={() => {\n            setIsAuthed(false);\n            setUsername('');\n          }}\n        />\n      ) : (\n        <LoginForm onLogin={handleLogin} errorMessage={errorMessage} />\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}