{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/C96363A/Automation/testing-component-with-cypress-storybook/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _toConsumableArray from \"/Users/C96363A/Automation/testing-component-with-cypress-storybook/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _defineProperty from \"/Users/C96363A/Automation/testing-component-with-cypress-storybook/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _slicedToArray from \"/Users/C96363A/Automation/testing-component-with-cypress-storybook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _asyncToGenerator from \"/Users/C96363A/Automation/testing-component-with-cypress-storybook/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _regeneratorRuntime from \"/Users/C96363A/Automation/testing-component-with-cypress-storybook/node_modules/@babel/runtime/regenerator/index.js\";\nexport { i as context } from './index-deps.js';\nimport { c as commonjsGlobal, p as parse_1, l as lib$2, a as lib$3, j as jsonParse } from './fetch-deps.js';\nimport { _ as __awaiter, d as devUtils, p as parseBody, g as getPublicUrlFromRequest, N as NetworkError } from './RequestHandler-deps.js';\nexport { R as RequestHandler, f as cleanUrl, e as compose, c as createResponseComposition, b as defaultContext, a as defaultResponse, m as matchRequestUrl, r as response } from './RequestHandler-deps.js';\nimport { store } from '@mswjs/cookies';\nimport { i as isStringEqual, R as RestHandler } from './rest-deps.js';\nexport { a as RESTMethods, R as RestHandler, r as rest, b as restContext } from './rest-deps.js';\nimport { t as tryCatch, p as parseGraphQLRequest, G as GraphQLHandler } from './graphql-deps.js';\nexport { G as GraphQLHandler, g as graphql, a as graphqlContext } from './graphql-deps.js';\nimport { m as mergeRight } from './errors-deps.js';\nimport { createInterceptor } from '@mswjs/interceptors';\nimport { interceptFetch } from '@mswjs/interceptors/lib/interceptors/fetch';\nimport { interceptXMLHttpRequest } from '@mswjs/interceptors/lib/interceptors/XMLHttpRequest';\nimport './xml-deps.js';\nimport '@mswjs/interceptors/lib/utils/getCleanUrl';\nvar lib$1 = {};\nvar StrictEventEmitter$1 = {};\nvar events = {\n  exports: {}\n};\nvar R = typeof Reflect === 'object' ? Reflect : null;\nvar ReflectApply = R && typeof R.apply === 'function' ? R.apply : function ReflectApply(target, receiver, args) {\n  return Function.prototype.apply.call(target, receiver, args);\n};\nvar ReflectOwnKeys;\n\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys;\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n};\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\n\nevents.exports = EventEmitter;\nevents.exports.once = once; // Backwards-compat with node 0.10.x\n\nEventEmitter.EventEmitter = EventEmitter;\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined; // By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\n\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function get() {\n    return defaultMaxListeners;\n  },\n  set: function set(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function () {\n  if (this._events === undefined || this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n}; // Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\n\n\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined) return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args.push(arguments[i]);\n  }\n\n  var doError = type === 'error';\n  var events = this._events;\n  if (events !== undefined) doError = doError && events.error === undefined;else if (!doError) return false; // If there is no 'error' event listener then throw.\n\n  if (doError) {\n    var er;\n    if (args.length > 0) er = args[0];\n\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    } // At least give some kind of context to the user\n\n\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n  if (handler === undefined) return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n\n    for (var i = 0; i < len; ++i) {\n      ReflectApply(listeners[i], this, args);\n    }\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n  checkListener(listener);\n  events = target._events;\n\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type, listener.listener ? listener.listener : listener); // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n\n      events = target._events;\n    }\n\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] = prepend ? [listener, existing] : [existing, listener]; // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    } // Check for listener leak\n\n\n    m = _getMaxListeners(target);\n\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true; // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n\n      var w = new Error('Possible EventEmitter memory leak detected. ' + existing.length + ' ' + String(type) + ' listeners ' + 'added. Use emitter.setMaxListeners() to ' + 'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener = function prependListener(type, listener) {\n  return _addListener(this, type, listener, true);\n};\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0) return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = {\n    fired: false,\n    wrapFn: undefined,\n    target: target,\n    type: type,\n    listener: listener\n  };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener = function prependOnceListener(type, listener) {\n  checkListener(listener);\n  this.prependListener(type, _onceWrap(this, type, listener));\n  return this;\n}; // Emits a 'removeListener' event if and only if the listener was removed.\n\n\nEventEmitter.prototype.removeListener = function removeListener(type, listener) {\n  var list, events, position, i, originalListener;\n  checkListener(listener);\n  events = this._events;\n  if (events === undefined) return this;\n  list = events[type];\n  if (list === undefined) return this;\n\n  if (list === listener || list.listener === listener) {\n    if (--this._eventsCount === 0) this._events = Object.create(null);else {\n      delete events[type];\n      if (events.removeListener) this.emit('removeListener', type, list.listener || listener);\n    }\n  } else if (typeof list !== 'function') {\n    position = -1;\n\n    for (i = list.length - 1; i >= 0; i--) {\n      if (list[i] === listener || list[i].listener === listener) {\n        originalListener = list[i].listener;\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0) return this;\n    if (position === 0) list.shift();else {\n      spliceOne(list, position);\n    }\n    if (list.length === 1) events[type] = list[0];\n    if (events.removeListener !== undefined) this.emit('removeListener', type, originalListener || listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(type) {\n  var listeners, events, i;\n  events = this._events;\n  if (events === undefined) return this; // not listening for removeListener, no need to emit\n\n  if (events.removeListener === undefined) {\n    if (arguments.length === 0) {\n      this._events = Object.create(null);\n      this._eventsCount = 0;\n    } else if (events[type] !== undefined) {\n      if (--this._eventsCount === 0) this._events = Object.create(null);else delete events[type];\n    }\n\n    return this;\n  } // emit removeListener for all listeners on all events\n\n\n  if (arguments.length === 0) {\n    var keys = Object.keys(events);\n    var key;\n\n    for (i = 0; i < keys.length; ++i) {\n      key = keys[i];\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n\n    this.removeAllListeners('removeListener');\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n    return this;\n  }\n\n  listeners = events[type];\n\n  if (typeof listeners === 'function') {\n    this.removeListener(type, listeners);\n  } else if (listeners !== undefined) {\n    // LIFO order\n    for (i = listeners.length - 1; i >= 0; i--) {\n      this.removeListener(type, listeners[i]);\n    }\n  }\n\n  return this;\n};\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n  if (events === undefined) return [];\n  var evlistener = events[type];\n  if (evlistener === undefined) return [];\n  if (typeof evlistener === 'function') return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n  return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function (emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\n\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n\n  for (var i = 0; i < n; ++i) {\n    copy[i] = arr[i];\n  }\n\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++) {\n    list[index] = list[index + 1];\n  }\n\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n\n      resolve([].slice.call(arguments));\n    }\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, {\n      once: true\n    });\n\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, {\n        once: true\n      });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n\nvar __extends = commonjsGlobal && commonjsGlobal.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __spreadArrays = commonjsGlobal && commonjsGlobal.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n\n  return r;\n};\n\nStrictEventEmitter$1.__esModule = true;\nStrictEventEmitter$1.StrictEventEmitter = void 0;\nvar events_1 = events.exports;\n\nvar StrictEventEmitter =\n/** @class */\nfunction (_super) {\n  __extends(StrictEventEmitter, _super);\n\n  function StrictEventEmitter() {\n    return _super.call(this) || this;\n  }\n\n  StrictEventEmitter.prototype.on = function (event, listener) {\n    return _super.prototype.on.call(this, event.toString(), listener);\n  };\n\n  StrictEventEmitter.prototype.once = function (event, listener) {\n    return _super.prototype.on.call(this, event.toString(), listener);\n  };\n\n  StrictEventEmitter.prototype.off = function (event, listener) {\n    return _super.prototype.off.call(this, event.toString(), listener);\n  };\n\n  StrictEventEmitter.prototype.emit = function (event) {\n    var data = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      data[_i - 1] = arguments[_i];\n    }\n\n    return _super.prototype.emit.apply(this, __spreadArrays([event.toString()], data));\n  };\n\n  StrictEventEmitter.prototype.addListener = function (event, listener) {\n    return _super.prototype.addListener.call(this, event.toString(), listener);\n  };\n\n  StrictEventEmitter.prototype.removeListener = function (event, listener) {\n    return _super.prototype.removeListener.call(this, event.toString(), listener);\n  };\n\n  return StrictEventEmitter;\n}(events_1.EventEmitter);\n\nStrictEventEmitter$1.StrictEventEmitter = StrictEventEmitter;\n\n(function (exports) {\n  var __createBinding = commonjsGlobal && commonjsGlobal.__createBinding || (Object.create ? function (o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, {\n      enumerable: true,\n      get: function get() {\n        return m[k];\n      }\n    });\n  } : function (o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n  });\n\n  exports.__esModule = true;\n  exports.StrictEventEmitter = void 0;\n  var StrictEventEmitter_1 = StrictEventEmitter$1;\n\n  __createBinding(exports, StrictEventEmitter_1, \"StrictEventEmitter\");\n})(lib$1);\n\nvar lib = {};\nvar until$1 = {};\nObject.defineProperty(until$1, \"__esModule\", {\n  value: true\n});\n/**\n * Gracefully handles a given Promise factory.\n * @example\n * cosnt [error, data] = await until(() => asyncAction())\n */\n\nuntil$1.until = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(promise) {\n    var data;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return promise().catch(function (error) {\n              throw error;\n            });\n\n          case 3:\n            data = _context.sent;\n            return _context.abrupt(\"return\", [null, data]);\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n            return _context.abrupt(\"return\", [_context.t0, null]);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 7]]);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nObject.defineProperty(lib, \"__esModule\", {\n  value: true\n});\nvar until_1 = until$1;\nvar until = lib.until = until_1.until;\n/**\r\n * Attempts to resolve a Service Worker instance from a given registration,\r\n * regardless of its state (active, installing, waiting).\r\n */\n\nvar getWorkerByRegistration = function getWorkerByRegistration(registration, absoluteWorkerUrl, findWorker) {\n  var allStates = [registration.active, registration.installing, registration.waiting];\n  var existingStates = allStates.filter(Boolean);\n  var mockWorker = existingStates.find(function (worker) {\n    return findWorker(worker.scriptURL, absoluteWorkerUrl);\n  });\n  return mockWorker || null;\n};\n/**\r\n * Returns an absolute Service Worker URL based on the given\r\n * relative URL (known during the registration).\r\n */\n\n\nfunction getAbsoluteWorkerUrl(relativeUrl) {\n  return new URL(relativeUrl, location.origin).href;\n}\n/**\r\n * Returns an active Service Worker instance.\r\n * When not found, registers a new Service Worker.\r\n */\n\n\nvar getWorkerInstance = function getWorkerInstance(url) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var findWorker = arguments.length > 2 ? arguments[2] : undefined;\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    var absoluteWorkerUrl, mockRegistrations, _mockRegistrations, existingRegistration, _yield$until, _yield$until2, error, instance, isWorkerMissing, scopeUrl;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            // Resolve the absolute Service Worker URL.\n            absoluteWorkerUrl = getAbsoluteWorkerUrl(url);\n            _context3.next = 3;\n            return navigator.serviceWorker.getRegistrations().then(function (registrations) {\n              return registrations.filter(function (registration) {\n                return getWorkerByRegistration(registration, absoluteWorkerUrl, findWorker);\n              });\n            });\n\n          case 3:\n            mockRegistrations = _context3.sent;\n\n            if (!navigator.serviceWorker.controller && mockRegistrations.length > 0) {\n              // Reload the page when it has associated workers, but no active controller.\n              // The absence of a controller can mean either:\n              // - page has no Service Worker associated with it\n              // - page has been hard-reloaded and its workers won't be used until the next reload.\n              // Since we've checked that there are registrations associated with this page,\n              // at this point we are sure it's hard reload that falls into this clause.\n              location.reload();\n            }\n\n            _mockRegistrations = _slicedToArray(mockRegistrations, 1), existingRegistration = _mockRegistrations[0];\n\n            if (!existingRegistration) {\n              _context3.next = 8;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", existingRegistration.update().then(function () {\n              return [getWorkerByRegistration(existingRegistration, absoluteWorkerUrl, findWorker), existingRegistration];\n            }));\n\n          case 8:\n            _context3.next = 10;\n            return until(function () {\n              return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n                var registration;\n                return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        _context2.next = 2;\n                        return navigator.serviceWorker.register(url, options);\n\n                      case 2:\n                        registration = _context2.sent;\n                        return _context2.abrupt(\"return\", [// Compare existing worker registration by its worker URL,\n                        // to prevent irrelevant workers to resolve here (such as Codesandbox worker).\n                        getWorkerByRegistration(registration, absoluteWorkerUrl, findWorker), registration]);\n\n                      case 4:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }\n                }, _callee2);\n              }));\n            });\n\n          case 10:\n            _yield$until = _context3.sent;\n            _yield$until2 = _slicedToArray(_yield$until, 2);\n            error = _yield$until2[0];\n            instance = _yield$until2[1];\n\n            if (!error) {\n              _context3.next = 20;\n              break;\n            }\n\n            isWorkerMissing = error.message.includes('(404)'); // Produce a custom error message when given a non-existing Service Worker url.\n            // Suggest developers to check their setup.\n\n            if (!isWorkerMissing) {\n              _context3.next = 19;\n              break;\n            }\n\n            scopeUrl = new URL((options === null || options === void 0 ? void 0 : options.scope) || '/', location.href);\n            throw new Error(devUtils.formatMessage(\"Failed to register a Service Worker for scope ('\".concat(scopeUrl.href, \"') with script ('\").concat(absoluteWorkerUrl, \"'): Service Worker script does not exist at the given path.\\n\\nDid you forget to run \\\"npx msw init <PUBLIC_DIR>\\\"?\\n\\nLearn more about creating the Service Worker script: https://mswjs.io/docs/cli/init\")));\n\n          case 19:\n            throw new Error(devUtils.formatMessage('Failed to register the Service Worker:\\n\\n%s', error.message));\n\n          case 20:\n            return _context3.abrupt(\"return\", instance);\n\n          case 21:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n};\n/**\r\n * Prints a worker activation message in the browser's console.\r\n */\n\n\nfunction printStartMessage() {\n  var args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  if (args.quiet) {\n    return;\n  }\n\n  var message = args.message || 'Mocking enabled.';\n  console.groupCollapsed(\"%c\".concat(devUtils.formatMessage(message)), 'color:orangered;font-weight:bold;');\n  console.log('%cDocumentation: %chttps://mswjs.io/docs', 'font-weight:bold', 'font-weight:normal');\n  console.log('Found an issue? https://github.com/mswjs/msw/issues');\n  console.groupEnd();\n}\n/**\r\n * Signals the worker to enable the interception of requests.\r\n */\n\n\nfunction enableMocking(context, options) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            context.workerChannel.send('MOCK_ACTIVATE');\n            return _context4.abrupt(\"return\", context.events.once('MOCKING_ENABLED').then(function () {\n              printStartMessage({\n                quiet: options.quiet\n              });\n            }));\n\n          case 2:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n}\n/**\r\n * Creates a communication channel between the client\r\n * and the Service Worker associated with the given event.\r\n */\n\n\nvar createBroadcastChannel = function createBroadcastChannel(event) {\n  var port = event.ports[0];\n  return {\n    /**\r\n     * Sends a text message to the connected Service Worker.\r\n     */\n    send: function send(message) {\n      if (port) {\n        port.postMessage(message);\n      }\n    }\n  };\n};\n\nfunction getAllCookies() {\n  return parse_1(document.cookie);\n}\n/**\r\n * Returns relevant document cookies based on the request `credentials` option.\r\n */\n\n\nfunction getRequestCookies(request) {\n  /**\r\n   * @note No cookies persist on the document in Node.js: no document.\r\n   */\n  if (typeof document === 'undefined' || typeof location === 'undefined') {\n    return {};\n  }\n\n  switch (request.credentials) {\n    case 'same-origin':\n      {\n        // Return document cookies only when requested a resource\n        // from the same origin as the current document.\n        return location.origin === request.url.origin ? getAllCookies() : {};\n      }\n\n    case 'include':\n      {\n        // Return all document cookies.\n        return getAllCookies();\n      }\n\n    default:\n      {\n        return {};\n      }\n  }\n}\n/**\r\n * Sets relevant cookies on the request.\r\n * Request cookies are taken from the following sources:\r\n * - Immediate (own) request cookies (those in the \"Cookie\" request header);\r\n * - From the `document.cookie` based on the request's `credentials` value;\r\n * - From the internal cookie store that persists/hydrates cookies in Node.js\r\n */\n\n\nfunction setRequestCookies(request) {\n  var _a; // Set mocked request cookies from the `cookie` header of the original request.\n  // No need to take `credentials` into account, because in Node.js requests are intercepted\n  // _after_ they happen. Request issuer should have already taken care of sending relevant cookies.\n  // Unlike browser, where interception is on the worker level, _before_ the request happens.\n\n\n  var requestCookiesString = request.headers.get('cookie');\n  store.hydrate();\n  var cookiesFromStore = Array.from((_a = store.get(Object.assign(Object.assign({}, request), {\n    url: request.url.toString()\n  }))) === null || _a === void 0 ? void 0 : _a.entries()).reduce(function (cookies, _ref2) {\n    var _ref3 = _slicedToArray(_ref2, 2),\n        name = _ref3[0],\n        value = _ref3[1].value;\n\n    return Object.assign(cookies, _defineProperty({}, name.trim(), value));\n  }, {});\n  var cookiesFromDocument = getRequestCookies(request);\n  var forwardedCookies = Object.assign(Object.assign({}, cookiesFromDocument), cookiesFromStore); // Ensure the persisted (document) cookies are propagated to the request.\n  // Propagated the cookies persisted in the Cookuie Store to the request headers.\n  // This forwards relevant request cookies based on the request's credentials.\n\n  for (var _i2 = 0, _Object$entries = Object.entries(forwardedCookies); _i2 < _Object$entries.length; _i2++) {\n    var _Object$entries$_i = _slicedToArray(_Object$entries[_i2], 2),\n        name = _Object$entries$_i[0],\n        value = _Object$entries$_i[1];\n\n    request.headers.append('cookie', \"\".concat(name, \"=\").concat(value));\n  }\n\n  var ownCookies = requestCookiesString ? parse_1(requestCookiesString) : {};\n  request.cookies = Object.assign(Object.assign(Object.assign({}, request.cookies), forwardedCookies), ownCookies);\n}\n/**\r\n * Ensures that an empty GET request body is always represented as `undefined`.\r\n */\n\n\nfunction pruneGetRequestBody(request) {\n  if (request.method && isStringEqual(request.method, 'GET') && request.body === '') {\n    return undefined;\n  }\n\n  return request.body;\n}\n/**\r\n * Converts a given request received from the Service Worker\r\n * into a `MockedRequest` instance.\r\n */\n\n\nfunction parseWorkerRequest(rawRequest) {\n  var request = {\n    id: rawRequest.id,\n    cache: rawRequest.cache,\n    credentials: rawRequest.credentials,\n    method: rawRequest.method,\n    url: new URL(rawRequest.url),\n    referrer: rawRequest.referrer,\n    referrerPolicy: rawRequest.referrerPolicy,\n    redirect: rawRequest.redirect,\n    mode: rawRequest.mode,\n    params: {},\n    cookies: {},\n    integrity: rawRequest.integrity,\n    keepalive: rawRequest.keepalive,\n    destination: rawRequest.destination,\n    body: pruneGetRequestBody(rawRequest),\n    bodyUsed: rawRequest.bodyUsed,\n    headers: new lib$2.Headers(rawRequest.headers)\n  }; // Set document cookies on the request.\n\n  setRequestCookies(request); // Parse the request's body based on the \"Content-Type\" header.\n\n  request.body = parseBody(request.body, request.headers);\n  return request;\n}\n/**\r\n * Returns a mocked response for a given request using following request handlers.\r\n */\n\n\nvar getResponse = function getResponse(request, handlers, resolutionContext) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n    var relevantHandlers, result;\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            relevantHandlers = handlers.filter(function (handler) {\n              return handler.test(request, resolutionContext);\n            });\n\n            if (!(relevantHandlers.length === 0)) {\n              _context6.next = 3;\n              break;\n            }\n\n            return _context6.abrupt(\"return\", {\n              handler: undefined,\n              response: undefined\n            });\n\n          case 3:\n            _context6.next = 5;\n            return relevantHandlers.reduce(function (executionResult, handler) {\n              return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n                var previousResults, result;\n                return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n                  while (1) {\n                    switch (_context5.prev = _context5.next) {\n                      case 0:\n                        _context5.next = 2;\n                        return executionResult;\n\n                      case 2:\n                        previousResults = _context5.sent;\n\n                        if (!(previousResults === null || previousResults === void 0 ? void 0 : previousResults.response)) {\n                          _context5.next = 5;\n                          break;\n                        }\n\n                        return _context5.abrupt(\"return\", executionResult);\n\n                      case 5:\n                        _context5.next = 7;\n                        return handler.run(request, resolutionContext);\n\n                      case 7:\n                        result = _context5.sent;\n\n                        if (!(result === null || result.handler.shouldSkip)) {\n                          _context5.next = 10;\n                          break;\n                        }\n\n                        return _context5.abrupt(\"return\", null);\n\n                      case 10:\n                        if (result.response) {\n                          _context5.next = 12;\n                          break;\n                        }\n\n                        return _context5.abrupt(\"return\", {\n                          request: result.request,\n                          handler: result.handler,\n                          response: undefined,\n                          parsedResult: result.parsedResult\n                        });\n\n                      case 12:\n                        if (result.response.once) {\n                          handler.markAsSkipped(true);\n                        }\n\n                        return _context5.abrupt(\"return\", result);\n\n                      case 14:\n                      case \"end\":\n                        return _context5.stop();\n                    }\n                  }\n                }, _callee5);\n              }));\n            }, Promise.resolve(null));\n\n          case 5:\n            result = _context6.sent;\n\n            if (result) {\n              _context6.next = 8;\n              break;\n            }\n\n            return _context6.abrupt(\"return\", {\n              handler: undefined,\n              response: undefined\n            });\n\n          case 8:\n            return _context6.abrupt(\"return\", {\n              handler: result.handler,\n              publicRequest: result.request,\n              parsedRequest: result.parsedResult,\n              response: result.response\n            });\n\n          case 9:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n};\n\nvar jsLevenshtein = function () {\n  function _min(d0, d1, d2, bx, ay) {\n    return d0 < d1 || d2 < d1 ? d0 > d2 ? d2 + 1 : d0 + 1 : bx === ay ? d1 : d1 + 1;\n  }\n\n  return function (a, b) {\n    if (a === b) {\n      return 0;\n    }\n\n    if (a.length > b.length) {\n      var tmp = a;\n      a = b;\n      b = tmp;\n    }\n\n    var la = a.length;\n    var lb = b.length;\n\n    while (la > 0 && a.charCodeAt(la - 1) === b.charCodeAt(lb - 1)) {\n      la--;\n      lb--;\n    }\n\n    var offset = 0;\n\n    while (offset < la && a.charCodeAt(offset) === b.charCodeAt(offset)) {\n      offset++;\n    }\n\n    la -= offset;\n    lb -= offset;\n\n    if (la === 0 || lb < 3) {\n      return lb;\n    }\n\n    var x = 0;\n    var y;\n    var d0;\n    var d1;\n    var d2;\n    var d3;\n    var dd;\n    var dy;\n    var ay;\n    var bx0;\n    var bx1;\n    var bx2;\n    var bx3;\n    var vector = [];\n\n    for (y = 0; y < la; y++) {\n      vector.push(y + 1);\n      vector.push(a.charCodeAt(offset + y));\n    }\n\n    var len = vector.length - 1;\n\n    for (; x < lb - 3;) {\n      bx0 = b.charCodeAt(offset + (d0 = x));\n      bx1 = b.charCodeAt(offset + (d1 = x + 1));\n      bx2 = b.charCodeAt(offset + (d2 = x + 2));\n      bx3 = b.charCodeAt(offset + (d3 = x + 3));\n      dd = x += 4;\n\n      for (y = 0; y < len; y += 2) {\n        dy = vector[y];\n        ay = vector[y + 1];\n        d0 = _min(dy, d0, d1, bx0, ay);\n        d1 = _min(d0, d1, d2, bx1, ay);\n        d2 = _min(d1, d2, d3, bx2, ay);\n        dd = _min(d2, d3, dd, bx3, ay);\n        vector[y] = dd;\n        d3 = d2;\n        d2 = d1;\n        d1 = d0;\n        d0 = dy;\n      }\n    }\n\n    for (; x < lb;) {\n      bx0 = b.charCodeAt(offset + (d0 = x));\n      dd = ++x;\n\n      for (y = 0; y < len; y += 2) {\n        dy = vector[y];\n        vector[y] = dd = _min(dy, d0, dd, bx0, vector[y + 1]);\n        d0 = dy;\n      }\n    }\n\n    return dd;\n  };\n}();\n\nvar MAX_MATCH_SCORE = 3;\nvar MAX_SUGGESTION_COUNT = 4;\nvar TYPE_MATCH_DELTA = 0.5;\n\nfunction groupHandlersByType(handlers) {\n  return handlers.reduce(function (groups, handler) {\n    if (handler instanceof RestHandler) {\n      groups.rest.push(handler);\n    }\n\n    if (handler instanceof GraphQLHandler) {\n      groups.graphql.push(handler);\n    }\n\n    return groups;\n  }, {\n    rest: [],\n    graphql: []\n  });\n}\n\nfunction getRestHandlerScore() {\n  return function (request, handler) {\n    var _handler$info = handler.info,\n        path = _handler$info.path,\n        method = _handler$info.method;\n\n    if (path instanceof RegExp || method instanceof RegExp) {\n      return Infinity;\n    }\n\n    var hasSameMethod = isStringEqual(request.method, method); // Always treat a handler with the same method as a more similar one.\n\n    var methodScoreDelta = hasSameMethod ? TYPE_MATCH_DELTA : 0;\n    var requestPublicUrl = getPublicUrlFromRequest(request);\n    var score = jsLevenshtein(requestPublicUrl, path);\n    return score - methodScoreDelta;\n  };\n}\n\nfunction getGraphQLHandlerScore(parsedQuery) {\n  return function (_, handler) {\n    if (typeof parsedQuery.operationName === 'undefined') {\n      return Infinity;\n    }\n\n    var _handler$info2 = handler.info,\n        operationType = _handler$info2.operationType,\n        operationName = _handler$info2.operationName;\n\n    if (typeof operationName !== 'string') {\n      return Infinity;\n    }\n\n    var hasSameOperationType = parsedQuery.operationType === operationType; // Always treat a handler with the same operation type as a more similar one.\n\n    var operationTypeScoreDelta = hasSameOperationType ? TYPE_MATCH_DELTA : 0;\n    var score = jsLevenshtein(parsedQuery.operationName, operationName);\n    return score - operationTypeScoreDelta;\n  };\n}\n\nfunction getSuggestedHandler(request, handlers, getScore) {\n  var suggestedHandlers = handlers.reduce(function (suggestions, handler) {\n    var score = getScore(request, handler);\n    return suggestions.concat([[score, handler]]);\n  }, []).sort(function (_ref4, _ref5) {\n    var _ref6 = _slicedToArray(_ref4, 1),\n        leftScore = _ref6[0];\n\n    var _ref7 = _slicedToArray(_ref5, 1),\n        rightScore = _ref7[0];\n\n    return leftScore - rightScore;\n  }).filter(function (_ref8) {\n    var _ref9 = _slicedToArray(_ref8, 1),\n        score = _ref9[0];\n\n    return score <= MAX_MATCH_SCORE;\n  }).slice(0, MAX_SUGGESTION_COUNT).map(function (_ref10) {\n    var _ref11 = _slicedToArray(_ref10, 2),\n        handler = _ref11[1];\n\n    return handler;\n  });\n  return suggestedHandlers;\n}\n\nfunction getSuggestedHandlersMessage(handlers) {\n  if (handlers.length > 1) {\n    return \"Did you mean to request one of the following resources instead?\\n\\n\".concat(handlers.map(function (handler) {\n      return \"  \\u2022 \".concat(handler.info.header);\n    }).join('\\n'));\n  }\n\n  return \"Did you mean to request \\\"\".concat(handlers[0].info.header, \"\\\" instead?\");\n}\n\nfunction onUnhandledRequest(request, handlers) {\n  var strategy = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'warn';\n  var parsedGraphQLQuery = tryCatch(function () {\n    return parseGraphQLRequest(request);\n  });\n\n  function generateHandlerSuggestion() {\n    /**\r\n     * @note Ignore exceptions during GraphQL request parsing because at this point\r\n     * we cannot assume the unhandled request is a valid GraphQL request.\r\n     * If the GraphQL parsing fails, just don't treat it as a GraphQL request.\r\n     */\n    var handlerGroups = groupHandlersByType(handlers);\n    var relevantHandlers = parsedGraphQLQuery ? handlerGroups.graphql : handlerGroups.rest;\n    var suggestedHandlers = getSuggestedHandler(request, relevantHandlers, parsedGraphQLQuery ? getGraphQLHandlerScore(parsedGraphQLQuery) : getRestHandlerScore());\n    return suggestedHandlers.length > 0 ? getSuggestedHandlersMessage(suggestedHandlers) : '';\n  }\n\n  function generateUnhandledRequestMessage() {\n    var publicUrl = getPublicUrlFromRequest(request);\n    var requestHeader = parsedGraphQLQuery ? \"\".concat(parsedGraphQLQuery.operationType, \" \").concat(parsedGraphQLQuery.operationName, \" (\").concat(request.method, \" \").concat(publicUrl, \")\") : \"\".concat(request.method, \" \").concat(publicUrl);\n    var handlerSuggestion = generateHandlerSuggestion();\n    var messageTemplate = [\"captured a request without a matching request handler:\", \"  \\u2022 \".concat(requestHeader), handlerSuggestion, \"If you still wish to intercept this unhandled request, please create a request handler for it.\\nRead more: https://mswjs.io/docs/getting-started/mocks\"].filter(Boolean);\n    return messageTemplate.join('\\n\\n');\n  }\n\n  function applyStrategy(strategy) {\n    // Generate handler suggestions only when applying the strategy.\n    // This saves bandwidth for scenarios when developers opt-out\n    // from the default unhandled request handling strategy.\n    var message = generateUnhandledRequestMessage();\n\n    switch (strategy) {\n      case 'error':\n        {\n          // Print a developer-friendly error.\n          devUtils.error('Error: %s', message); // Throw an exception to halt request processing and not perform the original request.\n\n          throw new Error(devUtils.formatMessage('Cannot bypass a request when using the \"error\" strategy for the \"onUnhandledRequest\" option.'));\n        }\n\n      case 'warn':\n        {\n          devUtils.warn('Warning: %s', message);\n          break;\n        }\n\n      case 'bypass':\n        break;\n\n      default:\n        throw new Error(devUtils.formatMessage('Failed to react to an unhandled request: unknown strategy \"%s\". Please provide one of the supported strategies (\"bypass\", \"warn\", \"error\") or a custom callback function as the value of the \"onUnhandledRequest\" option.', strategy));\n    }\n  }\n\n  if (typeof strategy === 'function') {\n    strategy(request, {\n      warning: applyStrategy.bind(null, 'warn'),\n      error: applyStrategy.bind(null, 'error')\n    });\n    return;\n  }\n\n  applyStrategy(strategy);\n}\n\nfunction readResponseCookies(request, response) {\n  store.add(Object.assign(Object.assign({}, request), {\n    url: request.url.toString()\n  }), response);\n  store.persist();\n}\n\nfunction handleRequest(request, handlers, options, emitter, handleRequestOptions) {\n  var _a, _b, _c;\n\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n    var lookupResult, handler, response;\n    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            emitter.emit('request:start', request); // Perform bypassed requests (i.e. issued via \"ctx.fetch\") as-is.\n\n            if (!(request.headers.get('x-msw-bypass') === 'true')) {\n              _context7.next = 5;\n              break;\n            }\n\n            emitter.emit('request:end', request);\n            (_a = handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.onBypassResponse) === null || _a === void 0 ? void 0 : _a.call(handleRequestOptions, request);\n            return _context7.abrupt(\"return\");\n\n          case 5:\n            _context7.next = 7;\n            return getResponse(request, handlers, handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.resolutionContext);\n\n          case 7:\n            lookupResult = _context7.sent;\n            handler = lookupResult.handler, response = lookupResult.response; // When there's no handler for the request, consider it unhandled.\n            // Allow the developer to react to such cases.\n\n            if (handler) {\n              _context7.next = 15;\n              break;\n            }\n\n            onUnhandledRequest(request, handlers, options.onUnhandledRequest);\n            emitter.emit('request:unhandled', request);\n            emitter.emit('request:end', request);\n            (_b = handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.onBypassResponse) === null || _b === void 0 ? void 0 : _b.call(handleRequestOptions, request);\n            return _context7.abrupt(\"return\");\n\n          case 15:\n            if (response) {\n              _context7.next = 20;\n              break;\n            }\n\n            devUtils.warn(\"Expected response resolver to return a mocked response Object, but got %s. The original response is going to be used instead.\\n\\n  \\u2022 %s\\n    %s\", response, handler.info.header, handler.info.callFrame);\n            emitter.emit('request:end', request);\n            (_c = handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.onBypassResponse) === null || _c === void 0 ? void 0 : _c.call(handleRequestOptions, request);\n            return _context7.abrupt(\"return\");\n\n          case 20:\n            // Store all the received response cookies in the virtual cookie store.\n            readResponseCookies(request, response);\n            emitter.emit('request:match', request);\n            return _context7.abrupt(\"return\", new Promise(function (resolve) {\n              var _a, _b, _c;\n\n              var requiredLookupResult = lookupResult;\n              var transformedResponse = ((_a = handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.transformResponse) === null || _a === void 0 ? void 0 : _a.call(handleRequestOptions, response)) || response;\n              (_b = handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.onMockedResponse) === null || _b === void 0 ? void 0 : _b.call(handleRequestOptions, transformedResponse, requiredLookupResult);\n              setTimeout(function () {\n                var _a;\n\n                (_a = handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.onMockedResponseSent) === null || _a === void 0 ? void 0 : _a.call(handleRequestOptions, transformedResponse, requiredLookupResult);\n                emitter.emit('request:end', request);\n                resolve(transformedResponse);\n              }, (_c = response.delay) !== null && _c !== void 0 ? _c : 0);\n            }));\n\n          case 23:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n}\n\nvar createRequestListener = function createRequestListener(context, options) {\n  return function (event, message) {\n    return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n      var channel, request;\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              channel = createBroadcastChannel(event);\n              _context8.prev = 1;\n              request = parseWorkerRequest(message.payload);\n              _context8.next = 5;\n              return handleRequest(request, context.requestHandlers, options, context.emitter, {\n                transformResponse: function transformResponse(response) {\n                  return Object.assign(Object.assign({}, response), {\n                    headers: response.headers.all()\n                  });\n                },\n                onBypassResponse: function onBypassResponse() {\n                  return channel.send({\n                    type: 'MOCK_NOT_FOUND'\n                  });\n                },\n                onMockedResponse: function onMockedResponse(response) {\n                  channel.send({\n                    type: 'MOCK_SUCCESS',\n                    payload: response\n                  });\n                },\n                onMockedResponseSent: function onMockedResponseSent(response, _ref12) {\n                  var handler = _ref12.handler,\n                      publicRequest = _ref12.publicRequest,\n                      parsedRequest = _ref12.parsedRequest;\n\n                  if (!options.quiet) {\n                    handler.log(publicRequest, response, handler, parsedRequest);\n                  }\n                }\n              });\n\n            case 5:\n              _context8.next = 12;\n              break;\n\n            case 7:\n              _context8.prev = 7;\n              _context8.t0 = _context8[\"catch\"](1);\n\n              if (!(_context8.t0 instanceof NetworkError)) {\n                _context8.next = 11;\n                break;\n              }\n\n              return _context8.abrupt(\"return\", channel.send({\n                type: 'NETWORK_ERROR',\n                payload: {\n                  name: _context8.t0.name,\n                  message: _context8.t0.message\n                }\n              }));\n\n            case 11:\n              // Treat all the other exceptions in a request handler\n              // as unintended, alerting that there is a problem needs fixing.\n              channel.send({\n                type: 'INTERNAL_ERROR',\n                payload: {\n                  status: 500,\n                  body: JSON.stringify({\n                    errorType: _context8.t0.constructor.name,\n                    message: _context8.t0.message,\n                    location: _context8.t0.stack\n                  })\n                }\n              });\n\n            case 12:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8, null, [[1, 7]]);\n    }));\n  };\n};\n\nfunction requestIntegrityCheck(context, serviceWorker) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee9() {\n    var _yield$context$events, actualChecksum;\n\n    return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            // Signal Service Worker to report back its integrity\n            context.workerChannel.send('INTEGRITY_CHECK_REQUEST');\n            _context9.next = 3;\n            return context.events.once('INTEGRITY_CHECK_RESPONSE');\n\n          case 3:\n            _yield$context$events = _context9.sent;\n            actualChecksum = _yield$context$events.payload;\n\n            if (!(actualChecksum !== \"02f4ad4a2797f85668baf196e553d929\")) {\n              _context9.next = 7;\n              break;\n            }\n\n            throw new Error(\"Currently active Service Worker (\".concat(actualChecksum, \") is behind the latest published one (\", \"02f4ad4a2797f85668baf196e553d929\", \").\"));\n\n          case 7:\n            return _context9.abrupt(\"return\", serviceWorker);\n\n          case 8:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, _callee9);\n  }));\n}\n/**\r\n * Intercepts and defers any requests on the page\r\n * until the Service Worker instance is ready.\r\n * Must only be used in a browser.\r\n */\n\n\nfunction deferNetworkRequestsUntil(predicatePromise) {\n  var _this2 = this;\n\n  // Defer any `XMLHttpRequest` requests until the Service Worker is ready.\n  var originalXhrSend = window.XMLHttpRequest.prototype.send;\n\n  window.XMLHttpRequest.prototype.send = function () {\n    var _this = this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    // Keep this function synchronous to comply with `XMLHttpRequest.prototype.send`,\n    // because that method is always synchronous.\n    until(function () {\n      return predicatePromise;\n    }).then(function () {\n      window.XMLHttpRequest.prototype.send = originalXhrSend;\n\n      _this.send.apply(_this, args);\n    });\n  }; // Defer any `fetch` requests until the Service Worker is ready.\n\n\n  var originalFetch = window.fetch;\n\n  window.fetch = function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee10() {\n      var _window;\n\n      return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              _context10.next = 2;\n              return until(function () {\n                return predicatePromise;\n              });\n\n            case 2:\n              window.fetch = originalFetch;\n              return _context10.abrupt(\"return\", (_window = window).fetch.apply(_window, args));\n\n            case 4:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, _callee10);\n    }));\n  };\n}\n\nfunction createResponseListener(context) {\n  return function (_, message) {\n    var _a;\n\n    var responseJson = message.payload;\n    /**\r\n     * CORS requests with `mode: \"no-cors\"` result in \"opaque\" responses.\r\n     * That kind of responses cannot be manipulated in JavaScript due\r\n     * to the security considerations.\r\n     * @see https://fetch.spec.whatwg.org/#concept-filtered-response-opaque\r\n     * @see https://github.com/mswjs/msw/issues/529\r\n     */\n\n    if ((_a = responseJson.type) === null || _a === void 0 ? void 0 : _a.includes('opaque')) {\n      return;\n    }\n\n    var response = new Response(responseJson.body || null, responseJson);\n    var isMockedResponse = response.headers.get('x-powered-by') === 'msw';\n\n    if (isMockedResponse) {\n      context.emitter.emit('response:mocked', response, responseJson.requestId);\n    } else {\n      context.emitter.emit('response:bypass', response, responseJson.requestId);\n    }\n  };\n}\n\nfunction validateWorkerScope(registration, options) {\n  if (!(options === null || options === void 0 ? void 0 : options.quiet) && !location.href.startsWith(registration.scope)) {\n    devUtils.warn(\"Cannot intercept requests on this page because it's outside of the worker's scope (\\\"\".concat(registration.scope, \"\\\"). If you wish to mock API requests on this page, you must resolve this scope issue.\\n\\n- (Recommended) Register the worker at the root level (\\\"/\\\") of your application.\\n- Set the \\\"Service-Worker-Allowed\\\" response header to allow out-of-scope workers.\"));\n  }\n}\n\nvar createStartHandler = function createStartHandler(context) {\n  return function start(options, customOptions) {\n    var _this3 = this;\n\n    var startWorkerInstance = function startWorkerInstance() {\n      return __awaiter(_this3, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee11() {\n        var instance, _instance, worker, registration, missingWorkerMessage, _yield$until3, _yield$until4, integrityError;\n\n        return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                // Remove all previously existing event listeners.\n                // This way none of the listeners persists between Fast refresh\n                // of the application's code.\n                context.events.removeAllListeners(); // Handle requests signaled by the worker.\n\n                context.workerChannel.on('REQUEST', createRequestListener(context, options));\n                context.workerChannel.on('RESPONSE', createResponseListener(context));\n                _context11.next = 5;\n                return getWorkerInstance(options.serviceWorker.url, options.serviceWorker.options, options.findWorker);\n\n              case 5:\n                instance = _context11.sent;\n                _instance = _slicedToArray(instance, 2), worker = _instance[0], registration = _instance[1];\n\n                if (worker) {\n                  _context11.next = 10;\n                  break;\n                }\n\n                missingWorkerMessage = (customOptions === null || customOptions === void 0 ? void 0 : customOptions.findWorker) ? devUtils.formatMessage(\"Failed to locate the Service Worker registration using a custom \\\"findWorker\\\" predicate.\\n\\nPlease ensure that the custom predicate properly locates the Service Worker registration at \\\"%s\\\".\\nMore details: https://mswjs.io/docs/api/setup-worker/start#findworker\\n\", options.serviceWorker.url) : devUtils.formatMessage(\"Failed to locate the Service Worker registration.\\n\\nThis most likely means that the worker script URL \\\"%s\\\" cannot resolve against the actual public hostname (%s). This may happen if your application runs behind a proxy, or has a dynamic hostname.\\n\\nPlease consider using a custom \\\"serviceWorker.url\\\" option to point to the actual worker script location, or a custom \\\"findWorker\\\" option to resolve the Service Worker registration manually. More details: https://mswjs.io/docs/api/setup-worker/start\", options.serviceWorker.url, location.host);\n                throw new Error(missingWorkerMessage);\n\n              case 10:\n                context.worker = worker;\n                context.registration = registration;\n                context.events.addListener(window, 'beforeunload', function () {\n                  if (worker.state !== 'redundant') {\n                    // Notify the Service Worker that this client has closed.\n                    // Internally, it's similar to disabling the mocking, only\n                    // client close event has a handler that self-terminates\n                    // the Service Worker when there are no open clients.\n                    context.workerChannel.send('CLIENT_CLOSED');\n                  } // Make sure we're always clearing the interval - there are reports that not doing this can\n                  // cause memory leaks in headless browser environments.\n\n\n                  window.clearInterval(context.keepAliveInterval);\n                }); // Check if the active Service Worker is the latest published one\n\n                _context11.next = 15;\n                return until(function () {\n                  return requestIntegrityCheck(context, worker);\n                });\n\n              case 15:\n                _yield$until3 = _context11.sent;\n                _yield$until4 = _slicedToArray(_yield$until3, 1);\n                integrityError = _yield$until4[0];\n\n                if (integrityError) {\n                  devUtils.error(\"Detected outdated Service Worker: \".concat(integrityError.message, \"\\n\\nThe mocking is still enabled, but it's highly recommended that you update your Service Worker by running:\\n\\n$ npx msw init <PUBLIC_DIR>\\n\\nThis is necessary to ensure that the Service Worker is in sync with the library to guarantee its stability.\\nIf this message still persists after updating, please report an issue: https://github.com/open-draft/msw/issues      \"));\n                }\n\n                context.keepAliveInterval = window.setInterval(function () {\n                  return context.workerChannel.send('KEEPALIVE_REQUEST');\n                }, 5000); // Warn the user when loading the page that lies outside\n                // of the worker's scope.\n\n                validateWorkerScope(registration, context.startOptions);\n                return _context11.abrupt(\"return\", registration);\n\n              case 22:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11);\n      }));\n    };\n\n    var workerRegistration = startWorkerInstance().then(function (registration) {\n      return __awaiter(_this3, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee12() {\n        var pendingInstance;\n        return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                pendingInstance = registration.installing || registration.waiting; // Wait until the worker is activated.\n                // Assume the worker is already activated if there's no pending registration\n                // (i.e. when reloading the page after a successful activation).\n\n                if (!pendingInstance) {\n                  _context12.next = 4;\n                  break;\n                }\n\n                _context12.next = 4;\n                return new Promise(function (resolve) {\n                  pendingInstance.addEventListener('statechange', function () {\n                    if (pendingInstance.state === 'activated') {\n                      return resolve();\n                    }\n                  });\n                });\n\n              case 4:\n                _context12.next = 6;\n                return enableMocking(context, options).catch(function (error) {\n                  throw new Error(\"Failed to enable mocking: \".concat(error === null || error === void 0 ? void 0 : error.message));\n                });\n\n              case 6:\n                return _context12.abrupt(\"return\", registration);\n\n              case 7:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12);\n      }));\n    }); // Defer any network requests until the Service Worker instance is ready.\n    // This prevents a race condition between the Service Worker registration\n    // and application's runtime requests (i.e. requests on mount).\n\n    if (options.waitUntilReady) {\n      deferNetworkRequestsUntil(workerRegistration);\n    }\n\n    return workerRegistration;\n  };\n};\n\nfunction printStopMessage() {\n  var args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  if (args.quiet) {\n    return;\n  }\n\n  console.log(\"%c\".concat(devUtils.formatMessage('Mocking disabled.')), 'color:orangered;font-weight:bold;');\n}\n\nvar createStop = function createStop(context) {\n  return function stop() {\n    var _a;\n    /**\r\n     * Signal the Service Worker to disable mocking for this client.\r\n     * Use this an an explicit way to stop the mocking, while preserving\r\n     * the worker-client relation. Does not affect the worker's lifecycle.\r\n     */\n\n\n    context.workerChannel.send('MOCK_DEACTIVATE');\n    window.clearInterval(context.keepAliveInterval);\n    printStopMessage({\n      quiet: (_a = context.startOptions) === null || _a === void 0 ? void 0 : _a.quiet\n    });\n  };\n};\n\nfunction _use(currentHandlers) {\n  for (var _len3 = arguments.length, handlers = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n    handlers[_key3 - 1] = arguments[_key3];\n  }\n\n  currentHandlers.unshift.apply(currentHandlers, handlers);\n}\n\nfunction _restoreHandlers(handlers) {\n  handlers.forEach(function (handler) {\n    handler.markAsSkipped(false);\n  });\n}\n\nfunction _resetHandlers(initialHandlers) {\n  for (var _len4 = arguments.length, nextHandlers = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n    nextHandlers[_key4 - 1] = arguments[_key4];\n  }\n\n  return nextHandlers.length > 0 ? [].concat(nextHandlers) : _toConsumableArray(initialHandlers);\n}\n\nvar DEFAULT_START_OPTIONS = {\n  serviceWorker: {\n    url: '/mockServiceWorker.js',\n    options: null\n  },\n  quiet: false,\n  waitUntilReady: true,\n  onUnhandledRequest: 'warn',\n  findWorker: function findWorker(scriptURL, mockServiceWorkerUrl) {\n    return scriptURL === mockServiceWorkerUrl;\n  }\n};\n/**\r\n * Returns resolved worker start options, merging the default options\r\n * with the given custom options.\r\n */\n\nfunction resolveStartOptions(initialOptions) {\n  return mergeRight(DEFAULT_START_OPTIONS, initialOptions || {});\n}\n\nfunction prepareStartHandler(handler, context) {\n  return function (initialOptions) {\n    context.startOptions = resolveStartOptions(initialOptions);\n    return handler(context.startOptions, initialOptions || {});\n  };\n}\n/**\r\n * Converts a given isomorphic request to a `MockedRequest` instance.\r\n */\n\n\nfunction parseIsomorphicRequest(request) {\n  var mockedRequest = {\n    id: request.id,\n    url: request.url,\n    method: request.method,\n    body: parseBody(request.body, request.headers),\n    credentials: request.credentials || 'same-origin',\n    headers: request.headers,\n    cookies: {},\n    redirect: 'manual',\n    referrer: '',\n    keepalive: false,\n    cache: 'default',\n    mode: 'cors',\n    referrerPolicy: 'no-referrer',\n    integrity: '',\n    destination: 'document',\n    bodyUsed: false\n  }; // Attach all the cookies from the virtual cookie store.\n\n  setRequestCookies(mockedRequest);\n  return mockedRequest;\n}\n\nfunction createFallbackRequestListener(context, options) {\n  var interceptor = createInterceptor({\n    modules: [interceptFetch, interceptXMLHttpRequest],\n    resolver: function resolver(request) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee13() {\n        var mockedRequest;\n        return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n          while (1) {\n            switch (_context13.prev = _context13.next) {\n              case 0:\n                mockedRequest = parseIsomorphicRequest(request);\n                return _context13.abrupt(\"return\", handleRequest(mockedRequest, context.requestHandlers, options, context.emitter, {\n                  transformResponse: function transformResponse(response) {\n                    return {\n                      status: response.status,\n                      statusText: response.statusText,\n                      headers: response.headers.all(),\n                      body: response.body\n                    };\n                  },\n                  onMockedResponseSent: function onMockedResponseSent(response, _ref13) {\n                    var handler = _ref13.handler,\n                        publicRequest = _ref13.publicRequest,\n                        parsedRequest = _ref13.parsedRequest;\n\n                    if (!options.quiet) {\n                      handler.log(publicRequest, response, handler, parsedRequest);\n                    }\n                  }\n                }));\n\n              case 2:\n              case \"end\":\n                return _context13.stop();\n            }\n          }\n        }, _callee13);\n      }));\n    }\n  });\n  interceptor.apply();\n  return interceptor;\n}\n\nfunction createFallbackStart(context) {\n  return function start(options) {\n    return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee14() {\n      return _regeneratorRuntime.wrap(function _callee14$(_context14) {\n        while (1) {\n          switch (_context14.prev = _context14.next) {\n            case 0:\n              context.fallbackInterceptor = createFallbackRequestListener(context, options);\n              printStartMessage({\n                message: 'Mocking enabled (fallback mode).',\n                quiet: options.quiet\n              });\n              return _context14.abrupt(\"return\", undefined);\n\n            case 3:\n            case \"end\":\n              return _context14.stop();\n          }\n        }\n      }, _callee14);\n    }));\n  };\n}\n\nfunction createFallbackStop(context) {\n  return function stop() {\n    var _a, _b;\n\n    (_a = context.fallbackInterceptor) === null || _a === void 0 ? void 0 : _a.restore();\n    printStopMessage({\n      quiet: (_b = context.startOptions) === null || _b === void 0 ? void 0 : _b.quiet\n    });\n  };\n}\n/**\r\n * Pipes all emitted events from one emitter to another.\r\n */\n\n\nfunction pipeEvents(source, destination) {\n  var rawEmit = source.emit; // @ts-ignore\n\n  if (rawEmit._isPiped) {\n    return;\n  }\n\n  source.emit = function (event) {\n    for (var _len5 = arguments.length, data = new Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n      data[_key5 - 1] = arguments[_key5];\n    }\n\n    destination.emit.apply(destination, [event].concat(data));\n    return rawEmit.call.apply(rawEmit, [this, event].concat(data));\n  }; // @ts-ignore\n\n\n  source.emit._isPiped = true;\n} // Declare the list of event handlers on the module's scope\n// so it persists between Fash refreshes of the application's code.\n\n\nvar listeners = [];\n/**\r\n * Creates a new mock Service Worker registration\r\n * with the given request handlers.\r\n * @param {RequestHandler[]} requestHandlers List of request handlers\r\n * @see {@link https://mswjs.io/docs/api/setup-worker `setupWorker`}\r\n */\n\nfunction setupWorker() {\n  for (var _len6 = arguments.length, requestHandlers = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n    requestHandlers[_key6] = arguments[_key6];\n  }\n\n  requestHandlers.forEach(function (handler) {\n    if (Array.isArray(handler)) throw new Error(devUtils.formatMessage('Failed to call \"setupWorker\" given an Array of request handlers (setupWorker([a, b])), expected to receive each handler individually: setupWorker(a, b).'));\n  }); // Error when attempting to run this function in a Node.js environment.\n\n  if (lib$3.exports.isNodeProcess()) {\n    throw new Error(devUtils.formatMessage('Failed to execute `setupWorker` in a non-browser environment. Consider using `setupServer` for Node.js environment instead.'));\n  }\n\n  var emitter = new lib$1.StrictEventEmitter();\n  var publicEmitter = new lib$1.StrictEventEmitter();\n  pipeEvents(emitter, publicEmitter);\n  var context = {\n    startOptions: undefined,\n    worker: null,\n    registration: null,\n    requestHandlers: [].concat(requestHandlers),\n    emitter: emitter,\n    workerChannel: {\n      on: function on(eventType, callback) {\n        context.events.addListener(navigator.serviceWorker, 'message', function (event) {\n          // Avoid messages broadcasted from unrelated workers.\n          if (event.source !== context.worker) {\n            return;\n          }\n\n          var message = jsonParse(event.data);\n\n          if (!message) {\n            return;\n          }\n\n          if (message.type === eventType) {\n            callback(event, message);\n          }\n        });\n      },\n      send: function send(type) {\n        var _a;\n\n        (_a = context.worker) === null || _a === void 0 ? void 0 : _a.postMessage(type);\n      }\n    },\n    events: {\n      addListener: function addListener(target, eventType, callback) {\n        target.addEventListener(eventType, callback);\n        listeners.push({\n          eventType: eventType,\n          target: target,\n          callback: callback\n        });\n        return function () {\n          target.removeEventListener(eventType, callback);\n        };\n      },\n      removeAllListeners: function removeAllListeners() {\n        var _iterator = _createForOfIteratorHelper(listeners),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var _step$value = _step.value,\n                target = _step$value.target,\n                eventType = _step$value.eventType,\n                callback = _step$value.callback;\n            target.removeEventListener(eventType, callback);\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n\n        listeners = [];\n      },\n      once: function once(eventType) {\n        var bindings = [];\n        return new Promise(function (resolve, reject) {\n          var handleIncomingMessage = function handleIncomingMessage(event) {\n            try {\n              var message = JSON.parse(event.data);\n\n              if (message.type === eventType) {\n                resolve(message);\n              }\n            } catch (error) {\n              reject(error);\n            }\n          };\n\n          bindings.push(context.events.addListener(navigator.serviceWorker, 'message', handleIncomingMessage), context.events.addListener(navigator.serviceWorker, 'messageerror', reject));\n        }).finally(function () {\n          bindings.forEach(function (unbind) {\n            return unbind();\n          });\n        });\n      }\n    },\n    useFallbackMode: !('serviceWorker' in navigator) || location.protocol === 'file:'\n  };\n  var startHandler = context.useFallbackMode ? createFallbackStart(context) : createStartHandler(context);\n  var stopHandler = context.useFallbackMode ? createFallbackStop(context) : createStop(context);\n  return {\n    start: prepareStartHandler(startHandler, context),\n    stop: function stop() {\n      context.events.removeAllListeners();\n      context.emitter.removeAllListeners();\n      publicEmitter.removeAllListeners();\n      stopHandler();\n    },\n    use: function use() {\n      for (var _len7 = arguments.length, handlers = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n        handlers[_key7] = arguments[_key7];\n      }\n\n      _use.apply(void 0, [context.requestHandlers].concat(handlers));\n    },\n    restoreHandlers: function restoreHandlers() {\n      _restoreHandlers(context.requestHandlers);\n    },\n    resetHandlers: function resetHandlers() {\n      for (var _len8 = arguments.length, nextHandlers = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {\n        nextHandlers[_key8] = arguments[_key8];\n      }\n\n      context.requestHandlers = _resetHandlers.apply(void 0, [requestHandlers].concat(nextHandlers));\n    },\n    printHandlers: function printHandlers() {\n      context.requestHandlers.forEach(function (handler) {\n        var _handler$info3 = handler.info,\n            header = _handler$info3.header,\n            callFrame = _handler$info3.callFrame;\n        var pragma = handler.info.hasOwnProperty('operationType') ? '[graphql]' : '[rest]';\n        console.groupCollapsed(\"\".concat(pragma, \" \").concat(header));\n\n        if (callFrame) {\n          console.log(\"Declaration: \".concat(callFrame));\n        }\n\n        console.log('Handler:', handler);\n\n        if (handler instanceof RestHandler) {\n          console.log('Match:', \"https://mswjs.io/repl?path=\".concat(handler.info.path));\n        }\n\n        console.groupEnd();\n      });\n    },\n    events: {\n      on: function on() {\n        return publicEmitter.on.apply(publicEmitter, arguments);\n      },\n      removeListener: function removeListener() {\n        return publicEmitter.removeListener.apply(publicEmitter, arguments);\n      },\n      removeAllListeners: function removeAllListeners() {\n        return publicEmitter.removeAllListeners.apply(publicEmitter, arguments);\n      }\n    }\n  };\n}\n\nexport { handleRequest, parseIsomorphicRequest, setupWorker };","map":{"version":3,"sources":["/Users/C96363A/Automation/testing-component-with-cypress-storybook/node_modules/msw/lib/esm/index.js"],"names":["i","context","c","commonjsGlobal","p","parse_1","l","lib$2","a","lib$3","j","jsonParse","_","__awaiter","d","devUtils","parseBody","g","getPublicUrlFromRequest","N","NetworkError","R","RequestHandler","f","cleanUrl","e","compose","createResponseComposition","b","defaultContext","defaultResponse","m","matchRequestUrl","r","response","store","isStringEqual","RestHandler","RESTMethods","rest","restContext","t","tryCatch","parseGraphQLRequest","G","GraphQLHandler","graphql","graphqlContext","mergeRight","createInterceptor","interceptFetch","interceptXMLHttpRequest","lib$1","StrictEventEmitter$1","events","exports","Reflect","ReflectApply","apply","target","receiver","args","Function","prototype","call","ReflectOwnKeys","ownKeys","Object","getOwnPropertySymbols","getOwnPropertyNames","concat","ProcessEmitWarning","warning","console","warn","NumberIsNaN","Number","isNaN","value","EventEmitter","init","once","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","defineProperty","enumerable","get","set","arg","RangeError","getPrototypeOf","create","setMaxListeners","n","_getMaxListeners","that","getMaxListeners","emit","type","arguments","length","push","doError","error","er","Error","err","message","handler","len","listeners","arrayClone","_addListener","prepend","existing","newListener","unshift","warned","w","String","name","emitter","count","addListener","on","prependListener","onceWrapper","fired","removeListener","wrapFn","_onceWrap","state","wrapped","bind","prependOnceListener","list","position","originalListener","shift","spliceOne","off","removeAllListeners","keys","key","_listeners","unwrap","evlistener","unwrapListeners","rawListeners","listenerCount","eventNames","arr","copy","Array","index","pop","ret","Promise","resolve","reject","errorListener","resolver","slice","eventTargetAgnosticAddListener","addErrorHandlerIfEventEmitter","flags","addEventListener","wrapListener","removeEventListener","__extends","extendStatics","setPrototypeOf","__proto__","hasOwnProperty","__","constructor","__spreadArrays","s","il","k","jl","__esModule","StrictEventEmitter","events_1","_super","event","toString","data","_i","__createBinding","o","k2","StrictEventEmitter_1","lib","until$1","until","promise","catch","until_1","getWorkerByRegistration","registration","absoluteWorkerUrl","findWorker","allStates","active","installing","waiting","existingStates","filter","Boolean","mockWorker","find","worker","scriptURL","getAbsoluteWorkerUrl","relativeUrl","URL","location","origin","href","getWorkerInstance","url","options","navigator","serviceWorker","getRegistrations","then","registrations","mockRegistrations","controller","reload","existingRegistration","update","register","instance","isWorkerMissing","includes","scopeUrl","scope","formatMessage","printStartMessage","quiet","groupCollapsed","log","groupEnd","enableMocking","workerChannel","send","createBroadcastChannel","port","ports","postMessage","getAllCookies","document","cookie","getRequestCookies","request","credentials","setRequestCookies","_a","requestCookiesString","headers","hydrate","cookiesFromStore","from","assign","entries","reduce","cookies","trim","cookiesFromDocument","forwardedCookies","append","ownCookies","pruneGetRequestBody","method","body","parseWorkerRequest","rawRequest","id","cache","referrer","referrerPolicy","redirect","mode","params","integrity","keepalive","destination","bodyUsed","Headers","getResponse","handlers","resolutionContext","relevantHandlers","test","executionResult","previousResults","run","result","shouldSkip","parsedResult","markAsSkipped","publicRequest","parsedRequest","jsLevenshtein","_min","d0","d1","d2","bx","ay","tmp","la","lb","charCodeAt","offset","x","y","d3","dd","dy","bx0","bx1","bx2","bx3","vector","MAX_MATCH_SCORE","MAX_SUGGESTION_COUNT","TYPE_MATCH_DELTA","groupHandlersByType","groups","getRestHandlerScore","info","path","RegExp","Infinity","hasSameMethod","methodScoreDelta","requestPublicUrl","score","getGraphQLHandlerScore","parsedQuery","operationName","operationType","hasSameOperationType","operationTypeScoreDelta","getSuggestedHandler","getScore","suggestedHandlers","suggestions","sort","leftScore","rightScore","map","getSuggestedHandlersMessage","header","join","onUnhandledRequest","strategy","parsedGraphQLQuery","generateHandlerSuggestion","handlerGroups","generateUnhandledRequestMessage","publicUrl","requestHeader","handlerSuggestion","messageTemplate","applyStrategy","readResponseCookies","add","persist","handleRequest","handleRequestOptions","_b","_c","onBypassResponse","lookupResult","callFrame","requiredLookupResult","transformedResponse","transformResponse","onMockedResponse","setTimeout","onMockedResponseSent","delay","createRequestListener","channel","payload","requestHandlers","all","status","JSON","stringify","errorType","stack","requestIntegrityCheck","actualChecksum","deferNetworkRequestsUntil","predicatePromise","originalXhrSend","window","XMLHttpRequest","originalFetch","fetch","createResponseListener","responseJson","Response","isMockedResponse","requestId","validateWorkerScope","startsWith","createStartHandler","start","customOptions","startWorkerInstance","missingWorkerMessage","host","clearInterval","keepAliveInterval","integrityError","setInterval","startOptions","workerRegistration","pendingInstance","waitUntilReady","printStopMessage","createStop","stop","use","currentHandlers","restoreHandlers","forEach","resetHandlers","initialHandlers","nextHandlers","DEFAULT_START_OPTIONS","mockServiceWorkerUrl","resolveStartOptions","initialOptions","prepareStartHandler","parseIsomorphicRequest","mockedRequest","createFallbackRequestListener","interceptor","modules","statusText","createFallbackStart","fallbackInterceptor","createFallbackStop","restore","pipeEvents","source","rawEmit","_isPiped","setupWorker","isArray","isNodeProcess","publicEmitter","eventType","callback","bindings","handleIncomingMessage","parse","finally","unbind","useFallbackMode","protocol","startHandler","stopHandler","printHandlers","pragma"],"mappings":"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","sourcesContent":["export { i as context } from './index-deps.js';\nimport { c as commonjsGlobal, p as parse_1, l as lib$2, a as lib$3, j as jsonParse } from './fetch-deps.js';\nimport { _ as __awaiter, d as devUtils, p as parseBody, g as getPublicUrlFromRequest, N as NetworkError } from './RequestHandler-deps.js';\nexport { R as RequestHandler, f as cleanUrl, e as compose, c as createResponseComposition, b as defaultContext, a as defaultResponse, m as matchRequestUrl, r as response } from './RequestHandler-deps.js';\nimport { store } from '@mswjs/cookies';\nimport { i as isStringEqual, R as RestHandler } from './rest-deps.js';\nexport { a as RESTMethods, R as RestHandler, r as rest, b as restContext } from './rest-deps.js';\nimport { t as tryCatch, p as parseGraphQLRequest, G as GraphQLHandler } from './graphql-deps.js';\nexport { G as GraphQLHandler, g as graphql, a as graphqlContext } from './graphql-deps.js';\nimport { m as mergeRight } from './errors-deps.js';\nimport { createInterceptor } from '@mswjs/interceptors';\nimport { interceptFetch } from '@mswjs/interceptors/lib/interceptors/fetch';\nimport { interceptXMLHttpRequest } from '@mswjs/interceptors/lib/interceptors/XMLHttpRequest';\nimport './xml-deps.js';\nimport '@mswjs/interceptors/lib/utils/getCleanUrl';\n\nvar lib$1 = {};\n\nvar StrictEventEmitter$1 = {};\n\nvar events = {exports: {}};\n\nvar R = typeof Reflect === 'object' ? Reflect : null;\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  };\n\nvar ReflectOwnKeys;\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys;\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n};\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nevents.exports = EventEmitter;\nevents.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    }\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n\nvar __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArrays = (commonjsGlobal && commonjsGlobal.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nStrictEventEmitter$1.__esModule = true;\nStrictEventEmitter$1.StrictEventEmitter = void 0;\nvar events_1 = events.exports;\nvar StrictEventEmitter = /** @class */ (function (_super) {\n    __extends(StrictEventEmitter, _super);\n    function StrictEventEmitter() {\n        return _super.call(this) || this;\n    }\n    StrictEventEmitter.prototype.on = function (event, listener) {\n        return _super.prototype.on.call(this, event.toString(), listener);\n    };\n    StrictEventEmitter.prototype.once = function (event, listener) {\n        return _super.prototype.on.call(this, event.toString(), listener);\n    };\n    StrictEventEmitter.prototype.off = function (event, listener) {\n        return _super.prototype.off.call(this, event.toString(), listener);\n    };\n    StrictEventEmitter.prototype.emit = function (event) {\n        var data = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            data[_i - 1] = arguments[_i];\n        }\n        return _super.prototype.emit.apply(this, __spreadArrays([event.toString()], data));\n    };\n    StrictEventEmitter.prototype.addListener = function (event, listener) {\n        return _super.prototype.addListener.call(this, event.toString(), listener);\n    };\n    StrictEventEmitter.prototype.removeListener = function (event, listener) {\n        return _super.prototype.removeListener.call(this, event.toString(), listener);\n    };\n    return StrictEventEmitter;\n}(events_1.EventEmitter));\nStrictEventEmitter$1.StrictEventEmitter = StrictEventEmitter;\n\n(function (exports) {\nvar __createBinding = (commonjsGlobal && commonjsGlobal.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.StrictEventEmitter = void 0;\nvar StrictEventEmitter_1 = StrictEventEmitter$1;\n__createBinding(exports, StrictEventEmitter_1, \"StrictEventEmitter\");\n}(lib$1));\n\nvar lib = {};\n\nvar until$1 = {};\n\nObject.defineProperty(until$1, \"__esModule\", { value: true });\n/**\n * Gracefully handles a given Promise factory.\n * @example\n * cosnt [error, data] = await until(() => asyncAction())\n */\nuntil$1.until = async (promise) => {\n    try {\n        const data = await promise().catch((error) => {\n            throw error;\n        });\n        return [null, data];\n    }\n    catch (error) {\n        return [error, null];\n    }\n};\n\nObject.defineProperty(lib, \"__esModule\", { value: true });\nvar until_1 = until$1;\nvar until = lib.until = until_1.until;\n\n/**\r\n * Attempts to resolve a Service Worker instance from a given registration,\r\n * regardless of its state (active, installing, waiting).\r\n */\r\nconst getWorkerByRegistration = (registration, absoluteWorkerUrl, findWorker) => {\r\n    const allStates = [\r\n        registration.active,\r\n        registration.installing,\r\n        registration.waiting,\r\n    ];\r\n    const existingStates = allStates.filter(Boolean);\r\n    const mockWorker = existingStates.find((worker) => {\r\n        return findWorker(worker.scriptURL, absoluteWorkerUrl);\r\n    });\r\n    return mockWorker || null;\r\n};\n\n/**\r\n * Returns an absolute Service Worker URL based on the given\r\n * relative URL (known during the registration).\r\n */\r\nfunction getAbsoluteWorkerUrl(relativeUrl) {\r\n    return new URL(relativeUrl, location.origin).href;\r\n}\n\n/**\r\n * Returns an active Service Worker instance.\r\n * When not found, registers a new Service Worker.\r\n */\r\nconst getWorkerInstance = (url, options = {}, findWorker) => __awaiter(void 0, void 0, void 0, function* () {\r\n    // Resolve the absolute Service Worker URL.\r\n    const absoluteWorkerUrl = getAbsoluteWorkerUrl(url);\r\n    const mockRegistrations = yield navigator.serviceWorker\r\n        .getRegistrations()\r\n        .then((registrations) => registrations.filter((registration) => getWorkerByRegistration(registration, absoluteWorkerUrl, findWorker)));\r\n    if (!navigator.serviceWorker.controller && mockRegistrations.length > 0) {\r\n        // Reload the page when it has associated workers, but no active controller.\r\n        // The absence of a controller can mean either:\r\n        // - page has no Service Worker associated with it\r\n        // - page has been hard-reloaded and its workers won't be used until the next reload.\r\n        // Since we've checked that there are registrations associated with this page,\r\n        // at this point we are sure it's hard reload that falls into this clause.\r\n        location.reload();\r\n    }\r\n    const [existingRegistration] = mockRegistrations;\r\n    if (existingRegistration) {\r\n        // When the Service Worker is registered, update it and return the reference.\r\n        return existingRegistration.update().then(() => {\r\n            return [\r\n                getWorkerByRegistration(existingRegistration, absoluteWorkerUrl, findWorker),\r\n                existingRegistration,\r\n            ];\r\n        });\r\n    }\r\n    // When the Service Worker wasn't found, register it anew and return the reference.\r\n    const [error, instance] = yield until(() => __awaiter(void 0, void 0, void 0, function* () {\r\n        const registration = yield navigator.serviceWorker.register(url, options);\r\n        return [\r\n            // Compare existing worker registration by its worker URL,\r\n            // to prevent irrelevant workers to resolve here (such as Codesandbox worker).\r\n            getWorkerByRegistration(registration, absoluteWorkerUrl, findWorker),\r\n            registration,\r\n        ];\r\n    }));\r\n    // Handle Service Worker registration errors.\r\n    if (error) {\r\n        const isWorkerMissing = error.message.includes('(404)');\r\n        // Produce a custom error message when given a non-existing Service Worker url.\r\n        // Suggest developers to check their setup.\r\n        if (isWorkerMissing) {\r\n            const scopeUrl = new URL((options === null || options === void 0 ? void 0 : options.scope) || '/', location.href);\r\n            throw new Error(devUtils.formatMessage(`\\\nFailed to register a Service Worker for scope ('${scopeUrl.href}') with script ('${absoluteWorkerUrl}'): Service Worker script does not exist at the given path.\n\nDid you forget to run \"npx msw init <PUBLIC_DIR>\"?\n\nLearn more about creating the Service Worker script: https://mswjs.io/docs/cli/init`));\r\n        }\r\n        // Fallback error message for any other registration errors.\r\n        throw new Error(devUtils.formatMessage('Failed to register the Service Worker:\\n\\n%s', error.message));\r\n    }\r\n    return instance;\r\n});\n\n/**\r\n * Prints a worker activation message in the browser's console.\r\n */\r\nfunction printStartMessage(args = {}) {\r\n    if (args.quiet) {\r\n        return;\r\n    }\r\n    const message = args.message || 'Mocking enabled.';\r\n    console.groupCollapsed(`%c${devUtils.formatMessage(message)}`, 'color:orangered;font-weight:bold;');\r\n    console.log('%cDocumentation: %chttps://mswjs.io/docs', 'font-weight:bold', 'font-weight:normal');\r\n    console.log('Found an issue? https://github.com/mswjs/msw/issues');\r\n    console.groupEnd();\r\n}\n\n/**\r\n * Signals the worker to enable the interception of requests.\r\n */\r\nfunction enableMocking(context, options) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        context.workerChannel.send('MOCK_ACTIVATE');\r\n        return context.events.once('MOCKING_ENABLED').then(() => {\r\n            printStartMessage({ quiet: options.quiet });\r\n        });\r\n    });\r\n}\n\n/**\r\n * Creates a communication channel between the client\r\n * and the Service Worker associated with the given event.\r\n */\r\nconst createBroadcastChannel = (event) => {\r\n    const port = event.ports[0];\r\n    return {\r\n        /**\r\n         * Sends a text message to the connected Service Worker.\r\n         */\r\n        send(message) {\r\n            if (port) {\r\n                port.postMessage(message);\r\n            }\r\n        },\r\n    };\r\n};\n\nfunction getAllCookies() {\r\n    return parse_1(document.cookie);\r\n}\r\n/**\r\n * Returns relevant document cookies based on the request `credentials` option.\r\n */\r\nfunction getRequestCookies(request) {\r\n    /**\r\n     * @note No cookies persist on the document in Node.js: no document.\r\n     */\r\n    if (typeof document === 'undefined' || typeof location === 'undefined') {\r\n        return {};\r\n    }\r\n    switch (request.credentials) {\r\n        case 'same-origin': {\r\n            // Return document cookies only when requested a resource\r\n            // from the same origin as the current document.\r\n            return location.origin === request.url.origin ? getAllCookies() : {};\r\n        }\r\n        case 'include': {\r\n            // Return all document cookies.\r\n            return getAllCookies();\r\n        }\r\n        default: {\r\n            return {};\r\n        }\r\n    }\r\n}\n\n/**\r\n * Sets relevant cookies on the request.\r\n * Request cookies are taken from the following sources:\r\n * - Immediate (own) request cookies (those in the \"Cookie\" request header);\r\n * - From the `document.cookie` based on the request's `credentials` value;\r\n * - From the internal cookie store that persists/hydrates cookies in Node.js\r\n */\r\nfunction setRequestCookies(request) {\r\n    var _a;\r\n    // Set mocked request cookies from the `cookie` header of the original request.\r\n    // No need to take `credentials` into account, because in Node.js requests are intercepted\r\n    // _after_ they happen. Request issuer should have already taken care of sending relevant cookies.\r\n    // Unlike browser, where interception is on the worker level, _before_ the request happens.\r\n    const requestCookiesString = request.headers.get('cookie');\r\n    store.hydrate();\r\n    const cookiesFromStore = Array.from((_a = store.get(Object.assign(Object.assign({}, request), { url: request.url.toString() }))) === null || _a === void 0 ? void 0 : _a.entries()).reduce((cookies, [name, { value }]) => {\r\n        return Object.assign(cookies, { [name.trim()]: value });\r\n    }, {});\r\n    const cookiesFromDocument = getRequestCookies(request);\r\n    const forwardedCookies = Object.assign(Object.assign({}, cookiesFromDocument), cookiesFromStore);\r\n    // Ensure the persisted (document) cookies are propagated to the request.\r\n    // Propagated the cookies persisted in the Cookuie Store to the request headers.\r\n    // This forwards relevant request cookies based on the request's credentials.\r\n    for (const [name, value] of Object.entries(forwardedCookies)) {\r\n        request.headers.append('cookie', `${name}=${value}`);\r\n    }\r\n    const ownCookies = requestCookiesString\r\n        ? parse_1(requestCookiesString)\r\n        : {};\r\n    request.cookies = Object.assign(Object.assign(Object.assign({}, request.cookies), forwardedCookies), ownCookies);\r\n}\n\n/**\r\n * Ensures that an empty GET request body is always represented as `undefined`.\r\n */\r\nfunction pruneGetRequestBody(request) {\r\n    if (request.method &&\r\n        isStringEqual(request.method, 'GET') &&\r\n        request.body === '') {\r\n        return undefined;\r\n    }\r\n    return request.body;\r\n}\n\n/**\r\n * Converts a given request received from the Service Worker\r\n * into a `MockedRequest` instance.\r\n */\r\nfunction parseWorkerRequest(rawRequest) {\r\n    const request = {\r\n        id: rawRequest.id,\r\n        cache: rawRequest.cache,\r\n        credentials: rawRequest.credentials,\r\n        method: rawRequest.method,\r\n        url: new URL(rawRequest.url),\r\n        referrer: rawRequest.referrer,\r\n        referrerPolicy: rawRequest.referrerPolicy,\r\n        redirect: rawRequest.redirect,\r\n        mode: rawRequest.mode,\r\n        params: {},\r\n        cookies: {},\r\n        integrity: rawRequest.integrity,\r\n        keepalive: rawRequest.keepalive,\r\n        destination: rawRequest.destination,\r\n        body: pruneGetRequestBody(rawRequest),\r\n        bodyUsed: rawRequest.bodyUsed,\r\n        headers: new lib$2.Headers(rawRequest.headers),\r\n    };\r\n    // Set document cookies on the request.\r\n    setRequestCookies(request);\r\n    // Parse the request's body based on the \"Content-Type\" header.\r\n    request.body = parseBody(request.body, request.headers);\r\n    return request;\r\n}\n\n/**\r\n * Returns a mocked response for a given request using following request handlers.\r\n */\r\nconst getResponse = (request, handlers, resolutionContext) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const relevantHandlers = handlers.filter((handler) => {\r\n        return handler.test(request, resolutionContext);\r\n    });\r\n    if (relevantHandlers.length === 0) {\r\n        return {\r\n            handler: undefined,\r\n            response: undefined,\r\n        };\r\n    }\r\n    const result = yield relevantHandlers.reduce((executionResult, handler) => __awaiter(void 0, void 0, void 0, function* () {\r\n        const previousResults = yield executionResult;\r\n        if (!!(previousResults === null || previousResults === void 0 ? void 0 : previousResults.response)) {\r\n            return executionResult;\r\n        }\r\n        const result = yield handler.run(request, resolutionContext);\r\n        if (result === null || result.handler.shouldSkip) {\r\n            return null;\r\n        }\r\n        if (!result.response) {\r\n            return {\r\n                request: result.request,\r\n                handler: result.handler,\r\n                response: undefined,\r\n                parsedResult: result.parsedResult,\r\n            };\r\n        }\r\n        if (result.response.once) {\r\n            handler.markAsSkipped(true);\r\n        }\r\n        return result;\r\n    }), Promise.resolve(null));\r\n    // Although reducing a list of relevant request handlers, it's possible\r\n    // that in the end there will be no handler associted with the request\r\n    // (i.e. if relevant handlers are fall-through).\r\n    if (!result) {\r\n        return {\r\n            handler: undefined,\r\n            response: undefined,\r\n        };\r\n    }\r\n    return {\r\n        handler: result.handler,\r\n        publicRequest: result.request,\r\n        parsedRequest: result.parsedResult,\r\n        response: result.response,\r\n    };\r\n});\n\nvar jsLevenshtein = (function()\n{\n  function _min(d0, d1, d2, bx, ay)\n  {\n    return d0 < d1 || d2 < d1\n        ? d0 > d2\n            ? d2 + 1\n            : d0 + 1\n        : bx === ay\n            ? d1\n            : d1 + 1;\n  }\n\n  return function(a, b)\n  {\n    if (a === b) {\n      return 0;\n    }\n\n    if (a.length > b.length) {\n      var tmp = a;\n      a = b;\n      b = tmp;\n    }\n\n    var la = a.length;\n    var lb = b.length;\n\n    while (la > 0 && (a.charCodeAt(la - 1) === b.charCodeAt(lb - 1))) {\n      la--;\n      lb--;\n    }\n\n    var offset = 0;\n\n    while (offset < la && (a.charCodeAt(offset) === b.charCodeAt(offset))) {\n      offset++;\n    }\n\n    la -= offset;\n    lb -= offset;\n\n    if (la === 0 || lb < 3) {\n      return lb;\n    }\n\n    var x = 0;\n    var y;\n    var d0;\n    var d1;\n    var d2;\n    var d3;\n    var dd;\n    var dy;\n    var ay;\n    var bx0;\n    var bx1;\n    var bx2;\n    var bx3;\n\n    var vector = [];\n\n    for (y = 0; y < la; y++) {\n      vector.push(y + 1);\n      vector.push(a.charCodeAt(offset + y));\n    }\n\n    var len = vector.length - 1;\n\n    for (; x < lb - 3;) {\n      bx0 = b.charCodeAt(offset + (d0 = x));\n      bx1 = b.charCodeAt(offset + (d1 = x + 1));\n      bx2 = b.charCodeAt(offset + (d2 = x + 2));\n      bx3 = b.charCodeAt(offset + (d3 = x + 3));\n      dd = (x += 4);\n      for (y = 0; y < len; y += 2) {\n        dy = vector[y];\n        ay = vector[y + 1];\n        d0 = _min(dy, d0, d1, bx0, ay);\n        d1 = _min(d0, d1, d2, bx1, ay);\n        d2 = _min(d1, d2, d3, bx2, ay);\n        dd = _min(d2, d3, dd, bx3, ay);\n        vector[y] = dd;\n        d3 = d2;\n        d2 = d1;\n        d1 = d0;\n        d0 = dy;\n      }\n    }\n\n    for (; x < lb;) {\n      bx0 = b.charCodeAt(offset + (d0 = x));\n      dd = ++x;\n      for (y = 0; y < len; y += 2) {\n        dy = vector[y];\n        vector[y] = dd = _min(dy, d0, dd, bx0, vector[y + 1]);\n        d0 = dy;\n      }\n    }\n\n    return dd;\n  };\n})();\n\nconst MAX_MATCH_SCORE = 3;\r\nconst MAX_SUGGESTION_COUNT = 4;\r\nconst TYPE_MATCH_DELTA = 0.5;\r\nfunction groupHandlersByType(handlers) {\r\n    return handlers.reduce((groups, handler) => {\r\n        if (handler instanceof RestHandler) {\r\n            groups.rest.push(handler);\r\n        }\r\n        if (handler instanceof GraphQLHandler) {\r\n            groups.graphql.push(handler);\r\n        }\r\n        return groups;\r\n    }, {\r\n        rest: [],\r\n        graphql: [],\r\n    });\r\n}\r\nfunction getRestHandlerScore() {\r\n    return (request, handler) => {\r\n        const { path, method } = handler.info;\r\n        if (path instanceof RegExp || method instanceof RegExp) {\r\n            return Infinity;\r\n        }\r\n        const hasSameMethod = isStringEqual(request.method, method);\r\n        // Always treat a handler with the same method as a more similar one.\r\n        const methodScoreDelta = hasSameMethod ? TYPE_MATCH_DELTA : 0;\r\n        const requestPublicUrl = getPublicUrlFromRequest(request);\r\n        const score = jsLevenshtein(requestPublicUrl, path);\r\n        return score - methodScoreDelta;\r\n    };\r\n}\r\nfunction getGraphQLHandlerScore(parsedQuery) {\r\n    return (_, handler) => {\r\n        if (typeof parsedQuery.operationName === 'undefined') {\r\n            return Infinity;\r\n        }\r\n        const { operationType, operationName } = handler.info;\r\n        if (typeof operationName !== 'string') {\r\n            return Infinity;\r\n        }\r\n        const hasSameOperationType = parsedQuery.operationType === operationType;\r\n        // Always treat a handler with the same operation type as a more similar one.\r\n        const operationTypeScoreDelta = hasSameOperationType ? TYPE_MATCH_DELTA : 0;\r\n        const score = jsLevenshtein(parsedQuery.operationName, operationName);\r\n        return score - operationTypeScoreDelta;\r\n    };\r\n}\r\nfunction getSuggestedHandler(request, handlers, getScore) {\r\n    const suggestedHandlers = handlers\r\n        .reduce((suggestions, handler) => {\r\n        const score = getScore(request, handler);\r\n        return suggestions.concat([[score, handler]]);\r\n    }, [])\r\n        .sort(([leftScore], [rightScore]) => leftScore - rightScore)\r\n        .filter(([score]) => score <= MAX_MATCH_SCORE)\r\n        .slice(0, MAX_SUGGESTION_COUNT)\r\n        .map(([, handler]) => handler);\r\n    return suggestedHandlers;\r\n}\r\nfunction getSuggestedHandlersMessage(handlers) {\r\n    if (handlers.length > 1) {\r\n        return `\\\nDid you mean to request one of the following resources instead?\n\n${handlers.map((handler) => `  • ${handler.info.header}`).join('\\n')}`;\r\n    }\r\n    return `Did you mean to request \"${handlers[0].info.header}\" instead?`;\r\n}\r\nfunction onUnhandledRequest(request, handlers, strategy = 'warn') {\r\n    const parsedGraphQLQuery = tryCatch(() => parseGraphQLRequest(request));\r\n    function generateHandlerSuggestion() {\r\n        /**\r\n         * @note Ignore exceptions during GraphQL request parsing because at this point\r\n         * we cannot assume the unhandled request is a valid GraphQL request.\r\n         * If the GraphQL parsing fails, just don't treat it as a GraphQL request.\r\n         */\r\n        const handlerGroups = groupHandlersByType(handlers);\r\n        const relevantHandlers = parsedGraphQLQuery\r\n            ? handlerGroups.graphql\r\n            : handlerGroups.rest;\r\n        const suggestedHandlers = getSuggestedHandler(request, relevantHandlers, parsedGraphQLQuery\r\n            ? getGraphQLHandlerScore(parsedGraphQLQuery)\r\n            : getRestHandlerScore());\r\n        return suggestedHandlers.length > 0\r\n            ? getSuggestedHandlersMessage(suggestedHandlers)\r\n            : '';\r\n    }\r\n    function generateUnhandledRequestMessage() {\r\n        const publicUrl = getPublicUrlFromRequest(request);\r\n        const requestHeader = parsedGraphQLQuery\r\n            ? `${parsedGraphQLQuery.operationType} ${parsedGraphQLQuery.operationName} (${request.method} ${publicUrl})`\r\n            : `${request.method} ${publicUrl}`;\r\n        const handlerSuggestion = generateHandlerSuggestion();\r\n        const messageTemplate = [\r\n            `captured a request without a matching request handler:`,\r\n            `  \\u2022 ${requestHeader}`,\r\n            handlerSuggestion,\r\n            `\\\nIf you still wish to intercept this unhandled request, please create a request handler for it.\nRead more: https://mswjs.io/docs/getting-started/mocks\\\n`,\r\n        ].filter(Boolean);\r\n        return messageTemplate.join('\\n\\n');\r\n    }\r\n    function applyStrategy(strategy) {\r\n        // Generate handler suggestions only when applying the strategy.\r\n        // This saves bandwidth for scenarios when developers opt-out\r\n        // from the default unhandled request handling strategy.\r\n        const message = generateUnhandledRequestMessage();\r\n        switch (strategy) {\r\n            case 'error': {\r\n                // Print a developer-friendly error.\r\n                devUtils.error('Error: %s', message);\r\n                // Throw an exception to halt request processing and not perform the original request.\r\n                throw new Error(devUtils.formatMessage('Cannot bypass a request when using the \"error\" strategy for the \"onUnhandledRequest\" option.'));\r\n            }\r\n            case 'warn': {\r\n                devUtils.warn('Warning: %s', message);\r\n                break;\r\n            }\r\n            case 'bypass':\r\n                break;\r\n            default:\r\n                throw new Error(devUtils.formatMessage('Failed to react to an unhandled request: unknown strategy \"%s\". Please provide one of the supported strategies (\"bypass\", \"warn\", \"error\") or a custom callback function as the value of the \"onUnhandledRequest\" option.', strategy));\r\n        }\r\n    }\r\n    if (typeof strategy === 'function') {\r\n        strategy(request, {\r\n            warning: applyStrategy.bind(null, 'warn'),\r\n            error: applyStrategy.bind(null, 'error'),\r\n        });\r\n        return;\r\n    }\r\n    applyStrategy(strategy);\r\n}\n\nfunction readResponseCookies(request, response) {\r\n    store.add(Object.assign(Object.assign({}, request), { url: request.url.toString() }), response);\r\n    store.persist();\r\n}\n\nfunction handleRequest(request, handlers, options, emitter, handleRequestOptions) {\r\n    var _a, _b, _c;\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        emitter.emit('request:start', request);\r\n        // Perform bypassed requests (i.e. issued via \"ctx.fetch\") as-is.\r\n        if (request.headers.get('x-msw-bypass') === 'true') {\r\n            emitter.emit('request:end', request);\r\n            (_a = handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.onBypassResponse) === null || _a === void 0 ? void 0 : _a.call(handleRequestOptions, request);\r\n            return;\r\n        }\r\n        // Resolve a mocked response from the list of request handlers.\r\n        const lookupResult = yield getResponse(request, handlers, handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.resolutionContext);\r\n        const { handler, response } = lookupResult;\r\n        // When there's no handler for the request, consider it unhandled.\r\n        // Allow the developer to react to such cases.\r\n        if (!handler) {\r\n            onUnhandledRequest(request, handlers, options.onUnhandledRequest);\r\n            emitter.emit('request:unhandled', request);\r\n            emitter.emit('request:end', request);\r\n            (_b = handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.onBypassResponse) === null || _b === void 0 ? void 0 : _b.call(handleRequestOptions, request);\r\n            return;\r\n        }\r\n        // When the handled request returned no mocked response, warn the developer,\r\n        // as it may be an oversight on their part. Perform the request as-is.\r\n        if (!response) {\r\n            devUtils.warn(`\\\nExpected response resolver to return a mocked response Object, but got %s. The original response is going to be used instead.\\\n\\n\n  \\u2022 %s\n    %s\\\n`, response, handler.info.header, handler.info.callFrame);\r\n            emitter.emit('request:end', request);\r\n            (_c = handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.onBypassResponse) === null || _c === void 0 ? void 0 : _c.call(handleRequestOptions, request);\r\n            return;\r\n        }\r\n        // Store all the received response cookies in the virtual cookie store.\r\n        readResponseCookies(request, response);\r\n        emitter.emit('request:match', request);\r\n        return new Promise((resolve) => {\r\n            var _a, _b, _c;\r\n            const requiredLookupResult = lookupResult;\r\n            const transformedResponse = ((_a = handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.transformResponse) === null || _a === void 0 ? void 0 : _a.call(handleRequestOptions, response)) ||\r\n                response;\r\n            (_b = handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.onMockedResponse) === null || _b === void 0 ? void 0 : _b.call(handleRequestOptions, transformedResponse, requiredLookupResult);\r\n            setTimeout(() => {\r\n                var _a;\r\n                (_a = handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.onMockedResponseSent) === null || _a === void 0 ? void 0 : _a.call(handleRequestOptions, transformedResponse, requiredLookupResult);\r\n                emitter.emit('request:end', request);\r\n                resolve(transformedResponse);\r\n            }, (_c = response.delay) !== null && _c !== void 0 ? _c : 0);\r\n        });\r\n    });\r\n}\n\nconst createRequestListener = (context, options) => {\r\n    return (event, message) => __awaiter(void 0, void 0, void 0, function* () {\r\n        const channel = createBroadcastChannel(event);\r\n        try {\r\n            const request = parseWorkerRequest(message.payload);\r\n            yield handleRequest(request, context.requestHandlers, options, context.emitter, {\r\n                transformResponse(response) {\r\n                    return Object.assign(Object.assign({}, response), { headers: response.headers.all() });\r\n                },\r\n                onBypassResponse() {\r\n                    return channel.send({\r\n                        type: 'MOCK_NOT_FOUND',\r\n                    });\r\n                },\r\n                onMockedResponse(response) {\r\n                    channel.send({\r\n                        type: 'MOCK_SUCCESS',\r\n                        payload: response,\r\n                    });\r\n                },\r\n                onMockedResponseSent(response, { handler, publicRequest, parsedRequest }) {\r\n                    if (!options.quiet) {\r\n                        handler.log(publicRequest, response, handler, parsedRequest);\r\n                    }\r\n                },\r\n            });\r\n        }\r\n        catch (error) {\r\n            if (error instanceof NetworkError) {\r\n                // Treat emulated network error differently,\r\n                // as it is an intended exception in a request handler.\r\n                return channel.send({\r\n                    type: 'NETWORK_ERROR',\r\n                    payload: {\r\n                        name: error.name,\r\n                        message: error.message,\r\n                    },\r\n                });\r\n            }\r\n            // Treat all the other exceptions in a request handler\r\n            // as unintended, alerting that there is a problem needs fixing.\r\n            channel.send({\r\n                type: 'INTERNAL_ERROR',\r\n                payload: {\r\n                    status: 500,\r\n                    body: JSON.stringify({\r\n                        errorType: error.constructor.name,\r\n                        message: error.message,\r\n                        location: error.stack,\r\n                    }),\r\n                },\r\n            });\r\n        }\r\n    });\r\n};\n\nfunction requestIntegrityCheck(context, serviceWorker) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        // Signal Service Worker to report back its integrity\r\n        context.workerChannel.send('INTEGRITY_CHECK_REQUEST');\r\n        const { payload: actualChecksum } = yield context.events.once('INTEGRITY_CHECK_RESPONSE');\r\n        // Compare the response from the Service Worker and the\r\n        // global variable set by Rollup during the build.\r\n        if (actualChecksum !== \"02f4ad4a2797f85668baf196e553d929\") {\r\n            throw new Error(`Currently active Service Worker (${actualChecksum}) is behind the latest published one (${\"02f4ad4a2797f85668baf196e553d929\"}).`);\r\n        }\r\n        return serviceWorker;\r\n    });\r\n}\n\n/**\r\n * Intercepts and defers any requests on the page\r\n * until the Service Worker instance is ready.\r\n * Must only be used in a browser.\r\n */\r\nfunction deferNetworkRequestsUntil(predicatePromise) {\r\n    // Defer any `XMLHttpRequest` requests until the Service Worker is ready.\r\n    const originalXhrSend = window.XMLHttpRequest.prototype.send;\r\n    window.XMLHttpRequest.prototype.send = function (...args) {\r\n        // Keep this function synchronous to comply with `XMLHttpRequest.prototype.send`,\r\n        // because that method is always synchronous.\r\n        until(() => predicatePromise).then(() => {\r\n            window.XMLHttpRequest.prototype.send = originalXhrSend;\r\n            this.send(...args);\r\n        });\r\n    };\r\n    // Defer any `fetch` requests until the Service Worker is ready.\r\n    const originalFetch = window.fetch;\r\n    window.fetch = (...args) => __awaiter(this, void 0, void 0, function* () {\r\n        yield until(() => predicatePromise);\r\n        window.fetch = originalFetch;\r\n        return window.fetch(...args);\r\n    });\r\n}\n\nfunction createResponseListener(context) {\r\n    return (_, message) => {\r\n        var _a;\r\n        const { payload: responseJson } = message;\r\n        /**\r\n         * CORS requests with `mode: \"no-cors\"` result in \"opaque\" responses.\r\n         * That kind of responses cannot be manipulated in JavaScript due\r\n         * to the security considerations.\r\n         * @see https://fetch.spec.whatwg.org/#concept-filtered-response-opaque\r\n         * @see https://github.com/mswjs/msw/issues/529\r\n         */\r\n        if ((_a = responseJson.type) === null || _a === void 0 ? void 0 : _a.includes('opaque')) {\r\n            return;\r\n        }\r\n        const response = new Response(responseJson.body || null, responseJson);\r\n        const isMockedResponse = response.headers.get('x-powered-by') === 'msw';\r\n        if (isMockedResponse) {\r\n            context.emitter.emit('response:mocked', response, responseJson.requestId);\r\n        }\r\n        else {\r\n            context.emitter.emit('response:bypass', response, responseJson.requestId);\r\n        }\r\n    };\r\n}\n\nfunction validateWorkerScope(registration, options) {\r\n    if (!(options === null || options === void 0 ? void 0 : options.quiet) && !location.href.startsWith(registration.scope)) {\r\n        devUtils.warn(`\\\nCannot intercept requests on this page because it's outside of the worker's scope (\"${registration.scope}\"). If you wish to mock API requests on this page, you must resolve this scope issue.\n\n- (Recommended) Register the worker at the root level (\"/\") of your application.\n- Set the \"Service-Worker-Allowed\" response header to allow out-of-scope workers.\\\n`);\r\n    }\r\n}\n\nconst createStartHandler = (context) => {\r\n    return function start(options, customOptions) {\r\n        const startWorkerInstance = () => __awaiter(this, void 0, void 0, function* () {\r\n            // Remove all previously existing event listeners.\r\n            // This way none of the listeners persists between Fast refresh\r\n            // of the application's code.\r\n            context.events.removeAllListeners();\r\n            // Handle requests signaled by the worker.\r\n            context.workerChannel.on('REQUEST', createRequestListener(context, options));\r\n            context.workerChannel.on('RESPONSE', createResponseListener(context));\r\n            const instance = yield getWorkerInstance(options.serviceWorker.url, options.serviceWorker.options, options.findWorker);\r\n            const [worker, registration] = instance;\r\n            if (!worker) {\r\n                const missingWorkerMessage = (customOptions === null || customOptions === void 0 ? void 0 : customOptions.findWorker)\r\n                    ? devUtils.formatMessage(`Failed to locate the Service Worker registration using a custom \"findWorker\" predicate.\n\nPlease ensure that the custom predicate properly locates the Service Worker registration at \"%s\".\nMore details: https://mswjs.io/docs/api/setup-worker/start#findworker\n`, options.serviceWorker.url)\r\n                    : devUtils.formatMessage(`Failed to locate the Service Worker registration.\n\nThis most likely means that the worker script URL \"%s\" cannot resolve against the actual public hostname (%s). This may happen if your application runs behind a proxy, or has a dynamic hostname.\n\nPlease consider using a custom \"serviceWorker.url\" option to point to the actual worker script location, or a custom \"findWorker\" option to resolve the Service Worker registration manually. More details: https://mswjs.io/docs/api/setup-worker/start`, options.serviceWorker.url, location.host);\r\n                throw new Error(missingWorkerMessage);\r\n            }\r\n            context.worker = worker;\r\n            context.registration = registration;\r\n            context.events.addListener(window, 'beforeunload', () => {\r\n                if (worker.state !== 'redundant') {\r\n                    // Notify the Service Worker that this client has closed.\r\n                    // Internally, it's similar to disabling the mocking, only\r\n                    // client close event has a handler that self-terminates\r\n                    // the Service Worker when there are no open clients.\r\n                    context.workerChannel.send('CLIENT_CLOSED');\r\n                }\r\n                // Make sure we're always clearing the interval - there are reports that not doing this can\r\n                // cause memory leaks in headless browser environments.\r\n                window.clearInterval(context.keepAliveInterval);\r\n            });\r\n            // Check if the active Service Worker is the latest published one\r\n            const [integrityError] = yield until(() => requestIntegrityCheck(context, worker));\r\n            if (integrityError) {\r\n                devUtils.error(`\\\nDetected outdated Service Worker: ${integrityError.message}\n\nThe mocking is still enabled, but it's highly recommended that you update your Service Worker by running:\n\n$ npx msw init <PUBLIC_DIR>\n\nThis is necessary to ensure that the Service Worker is in sync with the library to guarantee its stability.\nIf this message still persists after updating, please report an issue: https://github.com/open-draft/msw/issues\\\n      `);\r\n            }\r\n            context.keepAliveInterval = window.setInterval(() => context.workerChannel.send('KEEPALIVE_REQUEST'), 5000);\r\n            // Warn the user when loading the page that lies outside\r\n            // of the worker's scope.\r\n            validateWorkerScope(registration, context.startOptions);\r\n            return registration;\r\n        });\r\n        const workerRegistration = startWorkerInstance().then((registration) => __awaiter(this, void 0, void 0, function* () {\r\n            const pendingInstance = registration.installing || registration.waiting;\r\n            // Wait until the worker is activated.\r\n            // Assume the worker is already activated if there's no pending registration\r\n            // (i.e. when reloading the page after a successful activation).\r\n            if (pendingInstance) {\r\n                yield new Promise((resolve) => {\r\n                    pendingInstance.addEventListener('statechange', () => {\r\n                        if (pendingInstance.state === 'activated') {\r\n                            return resolve();\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n            // Print the activation message only after the worker has been activated.\r\n            yield enableMocking(context, options).catch((error) => {\r\n                throw new Error(`Failed to enable mocking: ${error === null || error === void 0 ? void 0 : error.message}`);\r\n            });\r\n            return registration;\r\n        }));\r\n        // Defer any network requests until the Service Worker instance is ready.\r\n        // This prevents a race condition between the Service Worker registration\r\n        // and application's runtime requests (i.e. requests on mount).\r\n        if (options.waitUntilReady) {\r\n            deferNetworkRequestsUntil(workerRegistration);\r\n        }\r\n        return workerRegistration;\r\n    };\r\n};\n\nfunction printStopMessage(args = {}) {\r\n    if (args.quiet) {\r\n        return;\r\n    }\r\n    console.log(`%c${devUtils.formatMessage('Mocking disabled.')}`, 'color:orangered;font-weight:bold;');\r\n}\n\nconst createStop = (context) => {\r\n    return function stop() {\r\n        var _a;\r\n        /**\r\n         * Signal the Service Worker to disable mocking for this client.\r\n         * Use this an an explicit way to stop the mocking, while preserving\r\n         * the worker-client relation. Does not affect the worker's lifecycle.\r\n         */\r\n        context.workerChannel.send('MOCK_DEACTIVATE');\r\n        window.clearInterval(context.keepAliveInterval);\r\n        printStopMessage({ quiet: (_a = context.startOptions) === null || _a === void 0 ? void 0 : _a.quiet });\r\n    };\r\n};\n\nfunction use(currentHandlers, ...handlers) {\r\n    currentHandlers.unshift(...handlers);\r\n}\r\nfunction restoreHandlers(handlers) {\r\n    handlers.forEach((handler) => {\r\n        handler.markAsSkipped(false);\r\n    });\r\n}\r\nfunction resetHandlers(initialHandlers, ...nextHandlers) {\r\n    return nextHandlers.length > 0 ? [...nextHandlers] : [...initialHandlers];\r\n}\n\nconst DEFAULT_START_OPTIONS = {\r\n    serviceWorker: {\r\n        url: '/mockServiceWorker.js',\r\n        options: null,\r\n    },\r\n    quiet: false,\r\n    waitUntilReady: true,\r\n    onUnhandledRequest: 'warn',\r\n    findWorker(scriptURL, mockServiceWorkerUrl) {\r\n        return scriptURL === mockServiceWorkerUrl;\r\n    },\r\n};\r\n/**\r\n * Returns resolved worker start options, merging the default options\r\n * with the given custom options.\r\n */\r\nfunction resolveStartOptions(initialOptions) {\r\n    return mergeRight(DEFAULT_START_OPTIONS, initialOptions || {});\r\n}\r\nfunction prepareStartHandler(handler, context) {\r\n    return (initialOptions) => {\r\n        context.startOptions = resolveStartOptions(initialOptions);\r\n        return handler(context.startOptions, initialOptions || {});\r\n    };\r\n}\n\n/**\r\n * Converts a given isomorphic request to a `MockedRequest` instance.\r\n */\r\nfunction parseIsomorphicRequest(request) {\r\n    const mockedRequest = {\r\n        id: request.id,\r\n        url: request.url,\r\n        method: request.method,\r\n        body: parseBody(request.body, request.headers),\r\n        credentials: request.credentials || 'same-origin',\r\n        headers: request.headers,\r\n        cookies: {},\r\n        redirect: 'manual',\r\n        referrer: '',\r\n        keepalive: false,\r\n        cache: 'default',\r\n        mode: 'cors',\r\n        referrerPolicy: 'no-referrer',\r\n        integrity: '',\r\n        destination: 'document',\r\n        bodyUsed: false,\r\n    };\r\n    // Attach all the cookies from the virtual cookie store.\r\n    setRequestCookies(mockedRequest);\r\n    return mockedRequest;\r\n}\n\nfunction createFallbackRequestListener(context, options) {\r\n    const interceptor = createInterceptor({\r\n        modules: [interceptFetch, interceptXMLHttpRequest],\r\n        resolver(request) {\r\n            return __awaiter(this, void 0, void 0, function* () {\r\n                const mockedRequest = parseIsomorphicRequest(request);\r\n                return handleRequest(mockedRequest, context.requestHandlers, options, context.emitter, {\r\n                    transformResponse(response) {\r\n                        return {\r\n                            status: response.status,\r\n                            statusText: response.statusText,\r\n                            headers: response.headers.all(),\r\n                            body: response.body,\r\n                        };\r\n                    },\r\n                    onMockedResponseSent(response, { handler, publicRequest, parsedRequest }) {\r\n                        if (!options.quiet) {\r\n                            handler.log(publicRequest, response, handler, parsedRequest);\r\n                        }\r\n                    },\r\n                });\r\n            });\r\n        },\r\n    });\r\n    interceptor.apply();\r\n    return interceptor;\r\n}\n\nfunction createFallbackStart(context) {\r\n    return function start(options) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            context.fallbackInterceptor = createFallbackRequestListener(context, options);\r\n            printStartMessage({\r\n                message: 'Mocking enabled (fallback mode).',\r\n                quiet: options.quiet,\r\n            });\r\n            return undefined;\r\n        });\r\n    };\r\n}\n\nfunction createFallbackStop(context) {\r\n    return function stop() {\r\n        var _a, _b;\r\n        (_a = context.fallbackInterceptor) === null || _a === void 0 ? void 0 : _a.restore();\r\n        printStopMessage({ quiet: (_b = context.startOptions) === null || _b === void 0 ? void 0 : _b.quiet });\r\n    };\r\n}\n\n/**\r\n * Pipes all emitted events from one emitter to another.\r\n */\r\nfunction pipeEvents(source, destination) {\r\n    const rawEmit = source.emit;\r\n    // @ts-ignore\r\n    if (rawEmit._isPiped) {\r\n        return;\r\n    }\r\n    source.emit = function (event, ...data) {\r\n        destination.emit(event, ...data);\r\n        return rawEmit.call(this, event, ...data);\r\n    };\r\n    // @ts-ignore\r\n    source.emit._isPiped = true;\r\n}\n\n// Declare the list of event handlers on the module's scope\r\n// so it persists between Fash refreshes of the application's code.\r\nlet listeners = [];\r\n/**\r\n * Creates a new mock Service Worker registration\r\n * with the given request handlers.\r\n * @param {RequestHandler[]} requestHandlers List of request handlers\r\n * @see {@link https://mswjs.io/docs/api/setup-worker `setupWorker`}\r\n */\r\nfunction setupWorker(...requestHandlers) {\r\n    requestHandlers.forEach((handler) => {\r\n        if (Array.isArray(handler))\r\n            throw new Error(devUtils.formatMessage('Failed to call \"setupWorker\" given an Array of request handlers (setupWorker([a, b])), expected to receive each handler individually: setupWorker(a, b).'));\r\n    });\r\n    // Error when attempting to run this function in a Node.js environment.\r\n    if (lib$3.exports.isNodeProcess()) {\r\n        throw new Error(devUtils.formatMessage('Failed to execute `setupWorker` in a non-browser environment. Consider using `setupServer` for Node.js environment instead.'));\r\n    }\r\n    const emitter = new lib$1.StrictEventEmitter();\r\n    const publicEmitter = new lib$1.StrictEventEmitter();\r\n    pipeEvents(emitter, publicEmitter);\r\n    const context = {\r\n        startOptions: undefined,\r\n        worker: null,\r\n        registration: null,\r\n        requestHandlers: [...requestHandlers],\r\n        emitter,\r\n        workerChannel: {\r\n            on(eventType, callback) {\r\n                context.events.addListener(navigator.serviceWorker, 'message', (event) => {\r\n                    // Avoid messages broadcasted from unrelated workers.\r\n                    if (event.source !== context.worker) {\r\n                        return;\r\n                    }\r\n                    const message = jsonParse(event.data);\r\n                    if (!message) {\r\n                        return;\r\n                    }\r\n                    if (message.type === eventType) {\r\n                        callback(event, message);\r\n                    }\r\n                });\r\n            },\r\n            send(type) {\r\n                var _a;\r\n                (_a = context.worker) === null || _a === void 0 ? void 0 : _a.postMessage(type);\r\n            },\r\n        },\r\n        events: {\r\n            addListener(target, eventType, callback) {\r\n                target.addEventListener(eventType, callback);\r\n                listeners.push({ eventType, target, callback });\r\n                return () => {\r\n                    target.removeEventListener(eventType, callback);\r\n                };\r\n            },\r\n            removeAllListeners() {\r\n                for (const { target, eventType, callback } of listeners) {\r\n                    target.removeEventListener(eventType, callback);\r\n                }\r\n                listeners = [];\r\n            },\r\n            once(eventType) {\r\n                const bindings = [];\r\n                return new Promise((resolve, reject) => {\r\n                    const handleIncomingMessage = (event) => {\r\n                        try {\r\n                            const message = JSON.parse(event.data);\r\n                            if (message.type === eventType) {\r\n                                resolve(message);\r\n                            }\r\n                        }\r\n                        catch (error) {\r\n                            reject(error);\r\n                        }\r\n                    };\r\n                    bindings.push(context.events.addListener(navigator.serviceWorker, 'message', handleIncomingMessage), context.events.addListener(navigator.serviceWorker, 'messageerror', reject));\r\n                }).finally(() => {\r\n                    bindings.forEach((unbind) => unbind());\r\n                });\r\n            },\r\n        },\r\n        useFallbackMode: !('serviceWorker' in navigator) || location.protocol === 'file:',\r\n    };\r\n    const startHandler = context.useFallbackMode\r\n        ? createFallbackStart(context)\r\n        : createStartHandler(context);\r\n    const stopHandler = context.useFallbackMode\r\n        ? createFallbackStop(context)\r\n        : createStop(context);\r\n    return {\r\n        start: prepareStartHandler(startHandler, context),\r\n        stop() {\r\n            context.events.removeAllListeners();\r\n            context.emitter.removeAllListeners();\r\n            publicEmitter.removeAllListeners();\r\n            stopHandler();\r\n        },\r\n        use(...handlers) {\r\n            use(context.requestHandlers, ...handlers);\r\n        },\r\n        restoreHandlers() {\r\n            restoreHandlers(context.requestHandlers);\r\n        },\r\n        resetHandlers(...nextHandlers) {\r\n            context.requestHandlers = resetHandlers(requestHandlers, ...nextHandlers);\r\n        },\r\n        printHandlers() {\r\n            context.requestHandlers.forEach((handler) => {\r\n                const { header, callFrame } = handler.info;\r\n                const pragma = handler.info.hasOwnProperty('operationType')\r\n                    ? '[graphql]'\r\n                    : '[rest]';\r\n                console.groupCollapsed(`${pragma} ${header}`);\r\n                if (callFrame) {\r\n                    console.log(`Declaration: ${callFrame}`);\r\n                }\r\n                console.log('Handler:', handler);\r\n                if (handler instanceof RestHandler) {\r\n                    console.log('Match:', `https://mswjs.io/repl?path=${handler.info.path}`);\r\n                }\r\n                console.groupEnd();\r\n            });\r\n        },\r\n        events: {\r\n            on(...args) {\r\n                return publicEmitter.on(...args);\r\n            },\r\n            removeListener(...args) {\r\n                return publicEmitter.removeListener(...args);\r\n            },\r\n            removeAllListeners(...args) {\r\n                return publicEmitter.removeAllListeners(...args);\r\n            },\r\n        },\r\n    };\r\n}\n\nexport { handleRequest, parseIsomorphicRequest, setupWorker };\n"]},"metadata":{},"sourceType":"module"}